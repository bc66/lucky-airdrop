{"version":3,"sources":["webpack:///./src/views/Create.vue?8427","webpack:///src/views/Create.vue","webpack:///./src/views/Create.vue?b4fb","webpack:///./src/views/Create.vue?2e8f","webpack:///./src/views/Create.vue?6aca"],"names":["_node_modules_mini_css_extract_plugin_0_5_0_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_7_0_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_2_0_1_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_7_0_vue_loader_lib_index_js_vue_loader_options_Create_vue_vue_type_style_index_0_id_1a53ff09_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_0_5_0_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_7_0_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_2_0_1_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_7_0_vue_loader_lib_index_js_vue_loader_options_Create_vue_vue_type_style_index_0_id_1a53ff09_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","ipfs","ipfs_mini__WEBPACK_IMPORTED_MODULE_8___default","a","host","port","protocol","VTHO_PER_CLAIMER","__webpack_exports__","name","components","CertModal","_components_CertModal_vue__WEBPACK_IMPORTED_MODULE_5__","ShareCard","_components_ShareCard_vue__WEBPACK_IMPORTED_MODULE_6__","RedPacketInfo","_components_RedPacketInfo_vue__WEBPACK_IMPORTED_MODULE_7__","beforeCreate","_this","this","window","connex","signingService","vendor","sign","content","request","purpose","payload","type","then","result","account","annex","signer","accountLink","$config","accountBaseUrl","sig","Buffer","from","signature","slice","signMsg","concat","domain","timestamp","accountPubK","thor_devkit__WEBPACK_IMPORTED_MODULE_4__","secp256k1","recover","blake2b256","onTokenChange","location","href","encodeURIComponent","mounted","$ticker","thor","ticker","destroyed","clearInterval","cTicker","data","showMsg","hasErr","errors","isCreating","tokenName","balance","created","secretWallet","shareLink","counter","envelope","id","envelopeType","nickname","amount","claimers","duration","initialBalance","message","messageLink","tokenAddress","computed","claimVTHO","methods","_this2","tokenAddr","tokens","balanceOfABI","constant","inputs","outputs","payable","stateMutability","method","call","bignumber_js__WEBPACK_IMPORTED_MODULE_2___default","decoded","dividedBy","Math","pow","toFixed","catch","err","console","error","acc","get","accInfo","togglePacketType","checkForm","push","$t","calcAmountInEther","gt","length","holdBalance","isLessThanOrEqualTo","createEnvelope","_this3","toString","_utils__WEBPACK_IMPORTED_MODULE_3__","createWallet","setInterval","refreshCounter","add","sendCreateTx","buildCreateClauses","newEnvelopeABI","newTokenEnvelopeABI","contract","clauses","amountInWei","multipliedBy","clause","value","asClause","address","Object","_Users_channer_Projects_workspace_dapps_lucky_airdrop_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","comment","tokenContract","approveABI","approveClause","_clause","buildEnergyClause","transferABI","transferMethod","_this4","createClauses","energyCluase","gas","getReceipt","txid","receipt","reverted","createEvent","findCreateEvent","envelopeId","topics","log","parseInt","origin","pathPrefix","btoa","privateKey","encrypted","encrypt","localStorage","setItem","_this5","next","transaction","i","output","j","events","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","to","_v","_s","target","_l","index","key","_e","visitor","creator","directives","rawName","expression","on","change","$event","$$selectedVal","Array","prototype","filter","options","o","selected","map","val","_value","multiple","for","min","placeholder","domProps","input","composing","$set","click","step","max","disabled","staticRenderFns","views_Createvue_type_script_lang_js_","Createvue_type_script_lang_js_","component","componentNormalizer"],"mappings":"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","file":"js/create.13815a42.js","sourcesContent":["import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.5.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=style&index=0&id=1a53ff09&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.5.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=style&index=0&id=1a53ff09&scoped=true&lang=css&\"","<template>\n    <div class=\"app\">\n      <header class=\"navbar navbar-default\" id=\"header\">\n        <div class=\"container-fluid header\">\n          <div class=\"row\">\n            <div class=\"col-sm-3 col-xs-12 navbar-header header--logo\">\n              <h3><router-link :to=\"{ name: 'home'}\">{{ $t(\"app_name\") }}</router-link></h3>\n            </div>\n\n            <div class=\"col-sm-6 hidden-xs header--thor-info\">\n              <div class=\"header--thor-info--wrap text-center\">\n                <div><strong>{{ $t(\"account\") }}: </strong> <span><a :href=\"accountLink\" target=\"_blank\">{{ account }}</a></span></div> |\n                <div><strong>{{ $t(\"balance\") }}: </strong>{{ balance }} {{ tokenName }}</div>\n              </div>\n            </div>\n\n          </div>\n        </div>\n      </header>\n\n      <div class=\"container\">\n        <CertModal v-if=\"!account\" />\n\n        <div v-else>\n          <div id='content-area' class='container-fluid create-form'>\n\n            <div v-if=\"hasErr\" class=\"alert envelope-alert\">\n              <b>{{ $t(\"errors.title\") }}</b>\n              <ul>\n                <li v-for=\"(error, index) in errors\" :key=\"index\">{{ error }}</li>\n              </ul>\n            </div>\n\n            <!-- Create Form -->\n            <div v-if='!created' class='container-fluid envelope-container envelope-container--create'>\n              <div class='envelope--title'>\n                <h4>{{ $t(\"create.title\") }}</h4>\n              </div>\n              <hr>\n\n              <div class='envelope--content'>\n                <div class='envelope--field'>\n                  <div class='envelope--input'>\n                    <div class='input-group'>\n                      <select v-model='tokenName' @change=\"onTokenChange\">\n                        <option value='VET' selected>VET</option>\n                        <option value='VTHO'>VTHO</option>\n                        <option value='OCE'>OCE</option>\n                        <option value='PLA'>PLA</option>\n                        <option value='TIC'>TIC</option>\n                        <option value='SNK'>SNK</option>\n                      </select>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div class='envelope--content'>\n                <div class='envelope--field'>\n                  <div class='envelope--input'>\n                    <div class='input-group'>\n                      <div class='input-addon'>\n                        <label v-if='envelope.envelopeType == 0' for='amount'>{{ $t(\"create.amount_each\") }}</label>\n                        <label v-else-if='envelope.envelopeType == 1' for='amount'>{{ $t(\"create.total\") }}</label>\n                      </div>\n                      <input\n                        id='amount'\n                        v-model='envelope.amount'\n                        type='number'\n                        min='0.006'\n                        placeholder='1.0'\n                        value='1.0'\n                        class='right-align'\n                      >\n                      <div class='input-addon'>\n                        <label for='amount'>{{ tokenName }}</label>\n                      </div>\n                    </div>\n                  </div>\n\n                  <p v-if='envelope.envelopeType == 0'>{{ $t(\"create.identical.type\") }} \n                    <a @click='togglePacketType()'>{{ $t(\"create.identical.change_text\") }} </a>\n                  </p>\n                  <p v-else-if='envelope.envelopeType == 1'>{{ $t(\"create.random.type\") }} \n                    <a @click='togglePacketType()'>{{ $t(\"create.random.change_text\") }}</a>\n                  </p>\n\n                  <div class=\"envelope--input--disclaimer\"><p>{{ $t(\"create.tip_hint\") }}</p></div>\n                </div>\n              </div>\n\n              <div class='envelope--content'>\n                <div class='envelope--field'>\n                  <div class='envelope--input'>\n                    <div class='input-group'>\n                      <div class='input-addon'>\n                        <label for='quantity'>{{ $t(\"create.quantity\") }}</label>\n                      </div>\n                      <input\n                        id='quantity'\n                        v-model='envelope.claimers'\n                        type='number'\n                        step='1'\n                        min='1'\n                        max='100'\n                        placeholder='Enter number'\n                        value='1'\n                        class='right-align'\n                      >\n                    </div>\n                  </div>\n                  <p>{{ $t(\"create.quantity_hint\") }}</p>\n                </div>\n              </div>\n\n              <div class='envelope--content'>\n                <div class='envelope--field'>\n                  <div class='envelope--input'>\n                    <div class='input-group'>\n                      <textarea :placeholder=\"$t('create.comment_placeholder')\" v-model='envelope.message'></textarea>\n                    </div>\n                  </div>\n                </div>\n                <div class='envelope--field'>\n                  <div class='envelope--input'>\n                    <div class='input-group'>\n                      <div class='input-addon'>\n                        <label for='sender'>{{ $t(\"create.from.label\") }}: </label>\n                      </div>\n                      <input type='text' name='sender' :placeholder=\"$t('create.from.placeholder')\" v-model='envelope.nickname'>\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"envelope--input--disclaimer\">\n                  <p>+ {{claimVTHO}} VTHO {{ $t(\"create.fee\") }}</p>\n                  <p>{{ $t(\"create.fee_hint\") }}</p>\n                </div>\n              </div>\n\n              <div class='envelope--buttons'>\n                <button :disabled=\"isCreating\" class='btn btn-create' @click='createEnvelope()'>{{isCreating ? $t(\"create.creating_btn_text\") + counter : $t(\"create.create_btn_text\") }}</button>\n              </div>\n\n              <div class=\"envelope--input--disclaimer\"><p><span>{{ $t(\"license\") }}</span></p></div>\n            </div>\n\n            <div v-else>\n              <ShareCard :shareLink='shareLink' />\n              <RedPacketInfo :visitor='envelope.creator' :tokenName='tokenName' :envelope='envelope' />\n            </div>\n\n          </div>\n        </div>\n      </div>\n    </div>\n    \n</template>\n\n<script>\nimport BN from 'bignumber.js'\nimport Utils from '../utils'\nimport { cry } from 'thor-devkit'\nimport CertModal from '@/components/CertModal.vue'\nimport ShareCard from '@/components/ShareCard.vue'\nimport RedPacketInfo from '@/components/RedPacketInfo.vue'\n\n\nimport IPFS from 'ipfs-mini'\nconst ipfs = new IPFS({ host: 'ipfs.infura.io', port: 5001, protocol: 'https' })\n\n\nconst VTHO_PER_CLAIMER = 200\n\nexport default {\n  name: 'Create',\n  components: {\n    CertModal,\n    ShareCard,\n    RedPacketInfo,\n  },\n  beforeCreate() {\n    if (!window.connex) {\n      location.href = 'https://env.vechain.org/r/#' + encodeURIComponent(location.href)\n    } else {\n      const signingService = connex.vendor.sign('cert')\n\n      // Generate a random string and request the identification\n      let content = 'Confirm that you would like this site to access your account'\n      signingService.request({\n          purpose: 'identification',\n          payload: {\n              type: 'text',\n              content: content\n          }\n      }).then(result => {\n          this.account = result.annex.signer\n          this.accountLink = this.$config.accountBaseUrl + '/accounts' + this.account\n\n          let sig = Buffer.from(result.signature.slice(2), 'hex')\n          let signMsg = `{\"domain\":\"${result.annex.domain}\",\"payload\":{\"content\":\"${content}\",\"type\":\"text\"},\"purpose\":\"identification\",\"signer\":\"${result.annex.signer}\",\"timestamp\":${result.annex.timestamp}}`\n\n          this.accountPubK = cry.secp256k1.recover(cry.blake2b256(signMsg), sig)\n\n          this.onTokenChange()\n      })\n    }\n  },\n\n  mounted() {\n    this.$ticker = connex.thor.ticker()\n  },\n  destroyed() {\n    this.$ticker = null\n    clearInterval(this.cTicker)\n  },\n  \n  data() {\n    return {\n      showMsg: false,\n      hasErr: false,\n      errors: [],\n      isCreating: false,\n      account: '',\n      accountPubK: '',\n      accountLink: '',\n      tokenName: 'VET',\n      balance: '',\n      created: false,\n      secretWallet: {},\n      shareLink: '',\n      counter: 20,\n      cTicker: null,\n      envelope: {\n        id: null,\n        envelopeType: 0,\n        nickname: '',\n        amount: 1,\n        claimers: 10,\n        duration: 86400,\n        initialBalance: '',\n        message: '',\n        messageLink: '',\n        tokenAddress: '0x0000000000000000000000000000000000000000',\n      }\n    }\n  },\n\n  computed: {\n    claimVTHO() {\n      return VTHO_PER_CLAIMER * this.envelope.claimers\n    }\n  },\n\n  methods: {\n    onTokenChange() {\n      this.balance = '0' // clean up the old value first\n\n      if (this.account) {\n        // get account balance\n          let tokenAddr = this.$config.tokens[this.tokenName]\n          this.envelope.tokenAddress = tokenAddr\n          \n          if (tokenAddr) {\n            let balanceOfABI = {\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"name\":\"balance\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}\n\n            connex.thor.account(tokenAddr).method(balanceOfABI).call(this.account).then(balance => {\n              this.balance = (new BN(balance.decoded.balance)).dividedBy(10**18).toFixed(2)\n            })\n            .catch(err => {\n              console.error(err)\n              this.errors = ['fail to connect the blockchain network']\n              this.hasErr = true\n            })\n          } else {\n            // VET\n            this.envelope.tokenAddress = '0x0000000000000000000000000000000000000000'\n\n            const acc = connex.thor.account(this.account)\n            acc.get().then(accInfo => {\n              this.balance = (new BN(accInfo.balance, 16)).dividedBy(10**18).toFixed(2)\n            })\n            .catch(err => {\n              console.error(err)\n              this.errors = ['fail to connect the blockchain network']\n              this.hasErr = true\n            })\n          }\n      }\n    },\n    togglePacketType() {\n      this.envelope.envelopeType = this.envelope.envelopeType == 0 ? 1 : 0\n    },\n    checkForm() {\n      this.hasErr = false\n      this.errors = []\n      let envelope = this.envelope\n\n      if (!envelope.amount) {\n        this.errors.push(this.$t(\"errors.amount_cannot_be_empty\"))\n      }\n      if (this.calcAmountInEther().gt(1000000)) {\n        this.errors.push(this.$t(\"errors.total_less_100w\"))\n      }\n      if (envelope.claimers < 0 || envelope.claimers > 100) {\n        this.errors.push(this.$t(\"errors.quantity_1_100\"))\n      }\n      if (envelope.message.length > 260) {\n        this.errors.push(this.$t(\"errors.message_less_260\"))\n      }\n      let holdBalance = (new BN(this.balance))\n      if (holdBalance.isLessThanOrEqualTo(this.calcAmountInEther())) {\n        this.errors.push(this.$t(\"errors.balance_insufficient\"))\n      }\n      if (envelope.nickname.length > 64) {\n        this.errors.push(this.$t(\"errors.nickname_less_64\"))\n      }\n\n      this.hasErr = this.errors.length > 0\n      return !this.hasErr\n    },\n    createEnvelope() {\n      // 1. validate form\n      if (!this.checkForm()) return\n\n      this.created = false\n      this.isCreating = true\n      this.envelope.initialBalance = this.calcAmountInEther().toString(10)\n\n      // 2. generate secret signer key pair\n      this.secretWallet = Utils.createWallet()\n\n      this.cTicker = setInterval(this.refreshCounter, 1000)\n\n      // 3. upload message to the IPFS\n      // 4. sign & send tx\n      if (this.envelope.message) {\n        ipfs.add(this.envelope.message).then(messageLink => {\n          this.envelope.messageLink = messageLink\n        })\n        .catch(err => {\n          console.error(err)\n          this.errors = ['Upload message failed!']\n          this.hasErr = true\n        })\n        .then(() => {\n          return this.sendCreateTx()\n        })\n      } else {\n        this.sendCreateTx()\n      }\n    },\n    calcAmountInEther() {\n      let amount = this.envelope.envelopeType == 0 ? (this.envelope.amount * this.envelope.claimers) : this.envelope.amount\n      return new BN(amount) // in ether\n    },\n    buildCreateClauses() {\n      let envelope = this.envelope\n      let newEnvelopeABI = {\"constant\":false,\"inputs\":[{\"name\":\"_envelopeType\",\"type\":\"uint8\"},{\"name\":\"_nickname\",\"type\":\"string\"},{\"name\":\"_duration\",\"type\":\"uint64\"},{\"name\":\"_messageLink\",\"type\":\"string\"},{\"name\":\"_maxClaims\",\"type\":\"uint64\"},{\"name\":\"_secretSigner\",\"type\":\"address\"}],\"name\":\"newEnvelope\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"}\n      let newTokenEnvelopeABI = {\"constant\":false,\"inputs\":[{\"name\":\"_envelopeType\",\"type\":\"uint8\"},{\"name\":\"_amount\",\"type\":\"uint256\"},{\"name\":\"_nickname\",\"type\":\"string\"},{\"name\":\"_duration\",\"type\":\"uint64\"},{\"name\":\"_messageLink\",\"type\":\"string\"},{\"name\":\"_maxClaims\",\"type\":\"uint64\"},{\"name\":\"_secretSigner\",\"type\":\"address\"},{\"name\":\"_tokenAddr\",\"type\":\"address\"}],\"name\":\"newVIP180Envelope\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}\n\n      let contract = connex.thor.account(this.$config.contract)\n\n      let clauses = []\n      let duration = 86400 // default expires in 1 day\n      let amount = this.calcAmountInEther()\n      let amountInWei = amount.multipliedBy(10**18)\n\n      if (this.tokenName == 'VET') {\n        let clause = contract.method(newEnvelopeABI)\n                          .value(amountInWei.toString(10))\n                          .asClause(\n                            envelope.envelopeType,\n                            envelope.nickname,\n                            duration,\n                            envelope.messageLink,\n                            envelope.claimers,\n                            this.secretWallet.address\n                          )\n        clauses.push({comment: 'Create Your Red Envelope', ...clause})\n      } else {\n        let tokenContract = connex.thor.account(this.$config.tokens[this.tokenName])\n        let approveABI = {\"constant\": false, \"inputs\": [{\"name\": \"_spender\", \"type\": \"address\"}, { \"name\": \"_value\", \"type\": \"uint256\"}],\"name\": \"approve\",\"outputs\": [],\"payable\": false,\"stateMutability\": \"nonpayable\",\"type\": \"function\"}\n\n        let approveClause = tokenContract.method(approveABI).asClause(this.$config.contract, amountInWei.toString(10))\n        clauses.push({comment: `Approve Envelope Contract ${amount.toString(10)} ${this.tokenName}`, ...approveClause})\n\n        let clause = contract.method(newTokenEnvelopeABI)\n                            .asClause(\n                              envelope.envelopeType,\n                              amountInWei.toString(10),\n                              envelope.nickname,\n                              duration,\n                              envelope.messageLink,\n                              envelope.claimers,\n                              this.secretWallet.address,\n                              envelope.tokenAddress\n                            )\n        clauses.push({comment: 'Create Your Red Envelope', ...clause})\n      }\n\n      return clauses\n    },\n    buildEnergyClause() {\n      let transferABI = {\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"transfer\",\"outputs\":[{\"name\":\"success\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}\n      let transferMethod = connex.thor.account(this.$config.tokens['VTHO']).method(transferABI)\n\n      let amount = VTHO_PER_CLAIMER * this.envelope.claimers\n      let amountInWei = (new BN(amount)).multipliedBy(10**18).toString(10)\n      return {comment: `Pay ${amount} VTHO for your claimers`, ...transferMethod.asClause(this.secretWallet.address, amountInWei)}\n    },\n    sendCreateTx() {\n      let signingService = connex.vendor.sign('tx')\n      let createClauses = this.buildCreateClauses()\n      let energyCluase = this.buildEnergyClause()\n\n      return signingService\n        .gas(500000)\n        .signer(this.account)\n        .request(createClauses.concat(energyCluase))\n        .then(result => {\n          return this.getReceipt(result.txid).then(receipt => {\n            this.isCreating = false\n\n            if(receipt.reverted) {\n              this.errors = ['transaction has been reverted']\n              this.hasErr = true\n              return\n            }\n\n            let createEvent = this.findCreateEvent(receipt)\n            let envelopeId = createEvent.topics[1]\n            \n            console.log('Red Envelope Id:', envelopeId)\n            \n            this.envelope.id = parseInt(envelopeId)\n            this.shareLink = window.location.origin + this.$config.pathPrefix + `/#/claim/${this.envelope.id}/${btoa(this.secretWallet.privateKey)}`\n\n            let encrypted = Utils.encrypt(this.accountPubK, this.shareLink)\n            localStorage.setItem(`shareLink#${this.envelope.id}`, encrypted.toString('hex'))\n\n            this.created = true\n          })\n        })\n        .catch(err => {\n          console.error(err)\n          this.isCreating = false\n          this.errors = ['It seems you rejected the transaction. Try again?']\n          this.hasErr = true\n        })\n    },\n    getReceipt(txid) {\n      return this.$ticker.next().then(() => {\n          return connex.thor.transaction(txid).getReceipt().then(receipt => {\n              if (!receipt) {\n                return this.getReceipt(txid)\n              }\n              return receipt\n            })\n        }).catch(err => {\n          console.error(err)\n          this.errors = ['fail to create the envelope']\n          this.hasErr = true\n        })\n    },\n\n    findCreateEvent(receipt) {\n      for (let i = 0; i < receipt.outputs.length; i++) {\n        let output = receipt.outputs[i]\n        for (let j = 0; j < output.events.length; j++) {\n          if (output.events[j].address == this.$config.contract) {\n            return output.events[j]\n          }\n        }\n      }\n    },\n    refreshCounter() {\n      if (this.counter == 0) {\n        this.counter = 20\n      }\n      this.counter--\n    }\n  }\n  \n}\n</script>\n\n<style scoped>\n  .cls-1{fill:#d8d8d8;}.cls-2{fill:#e1e7ec;}.cls-3{fill:#eb423e;}.cls-4{fill:#fbb03b;}.cls-5{fill:#7ac943;}.cls-6{fill:#fff;}.cls-7{fill:none;stroke:#eb423e;stroke-miterlimit:10;stroke-width:5px;}\n  .btn-create {\n    padding: 1rem 10rem;\n  }\n</style>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app\"},[_c('header',{staticClass:\"navbar navbar-default\",attrs:{\"id\":\"header\"}},[_c('div',{staticClass:\"container-fluid header\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-sm-3 col-xs-12 navbar-header header--logo\"},[_c('h3',[_c('router-link',{attrs:{\"to\":{ name: 'home'}}},[_vm._v(_vm._s(_vm.$t(\"app_name\")))])],1)]),_c('div',{staticClass:\"col-sm-6 hidden-xs header--thor-info\"},[_c('div',{staticClass:\"header--thor-info--wrap text-center\"},[_c('div',[_c('strong',[_vm._v(_vm._s(_vm.$t(\"account\"))+\": \")]),_c('span',[_c('a',{attrs:{\"href\":_vm.accountLink,\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.account))])])]),_vm._v(\" |\\n            \"),_c('div',[_c('strong',[_vm._v(_vm._s(_vm.$t(\"balance\"))+\": \")]),_vm._v(_vm._s(_vm.balance)+\" \"+_vm._s(_vm.tokenName))])])])])])]),_c('div',{staticClass:\"container\"},[(!_vm.account)?_c('CertModal'):_c('div',[_c('div',{staticClass:\"container-fluid create-form\",attrs:{\"id\":\"content-area\"}},[(_vm.hasErr)?_c('div',{staticClass:\"alert envelope-alert\"},[_c('b',[_vm._v(_vm._s(_vm.$t(\"errors.title\")))]),_c('ul',_vm._l((_vm.errors),function(error,index){return _c('li',{key:index},[_vm._v(_vm._s(error))])}),0)]):_vm._e(),(!_vm.created)?_c('div',{staticClass:\"container-fluid envelope-container envelope-container--create\"},[_c('div',{staticClass:\"envelope--title\"},[_c('h4',[_vm._v(_vm._s(_vm.$t(\"create.title\")))])]),_c('hr'),_c('div',{staticClass:\"envelope--content\"},[_c('div',{staticClass:\"envelope--field\"},[_c('div',{staticClass:\"envelope--input\"},[_c('div',{staticClass:\"input-group\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tokenName),expression:\"tokenName\"}],on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.tokenName=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.onTokenChange]}},[_c('option',{attrs:{\"value\":\"VET\",\"selected\":\"\"}},[_vm._v(\"VET\")]),_c('option',{attrs:{\"value\":\"VTHO\"}},[_vm._v(\"VTHO\")]),_c('option',{attrs:{\"value\":\"OCE\"}},[_vm._v(\"OCE\")]),_c('option',{attrs:{\"value\":\"PLA\"}},[_vm._v(\"PLA\")]),_c('option',{attrs:{\"value\":\"TIC\"}},[_vm._v(\"TIC\")]),_c('option',{attrs:{\"value\":\"SNK\"}},[_vm._v(\"SNK\")])])])])])]),_c('div',{staticClass:\"envelope--content\"},[_c('div',{staticClass:\"envelope--field\"},[_c('div',{staticClass:\"envelope--input\"},[_c('div',{staticClass:\"input-group\"},[_c('div',{staticClass:\"input-addon\"},[(_vm.envelope.envelopeType == 0)?_c('label',{attrs:{\"for\":\"amount\"}},[_vm._v(_vm._s(_vm.$t(\"create.amount_each\")))]):(_vm.envelope.envelopeType == 1)?_c('label',{attrs:{\"for\":\"amount\"}},[_vm._v(_vm._s(_vm.$t(\"create.total\")))]):_vm._e()]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.envelope.amount),expression:\"envelope.amount\"}],staticClass:\"right-align\",attrs:{\"id\":\"amount\",\"type\":\"number\",\"min\":\"0.006\",\"placeholder\":\"1.0\",\"value\":\"1.0\"},domProps:{\"value\":(_vm.envelope.amount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.envelope, \"amount\", $event.target.value)}}}),_c('div',{staticClass:\"input-addon\"},[_c('label',{attrs:{\"for\":\"amount\"}},[_vm._v(_vm._s(_vm.tokenName))])])])]),(_vm.envelope.envelopeType == 0)?_c('p',[_vm._v(_vm._s(_vm.$t(\"create.identical.type\"))+\" \\n                \"),_c('a',{on:{\"click\":function($event){return _vm.togglePacketType()}}},[_vm._v(_vm._s(_vm.$t(\"create.identical.change_text\"))+\" \")])]):(_vm.envelope.envelopeType == 1)?_c('p',[_vm._v(_vm._s(_vm.$t(\"create.random.type\"))+\" \\n                \"),_c('a',{on:{\"click\":function($event){return _vm.togglePacketType()}}},[_vm._v(_vm._s(_vm.$t(\"create.random.change_text\")))])]):_vm._e(),_c('div',{staticClass:\"envelope--input--disclaimer\"},[_c('p',[_vm._v(_vm._s(_vm.$t(\"create.tip_hint\")))])])])]),_c('div',{staticClass:\"envelope--content\"},[_c('div',{staticClass:\"envelope--field\"},[_c('div',{staticClass:\"envelope--input\"},[_c('div',{staticClass:\"input-group\"},[_c('div',{staticClass:\"input-addon\"},[_c('label',{attrs:{\"for\":\"quantity\"}},[_vm._v(_vm._s(_vm.$t(\"create.quantity\")))])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.envelope.claimers),expression:\"envelope.claimers\"}],staticClass:\"right-align\",attrs:{\"id\":\"quantity\",\"type\":\"number\",\"step\":\"1\",\"min\":\"1\",\"max\":\"100\",\"placeholder\":\"Enter number\",\"value\":\"1\"},domProps:{\"value\":(_vm.envelope.claimers)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.envelope, \"claimers\", $event.target.value)}}})])]),_c('p',[_vm._v(_vm._s(_vm.$t(\"create.quantity_hint\")))])])]),_c('div',{staticClass:\"envelope--content\"},[_c('div',{staticClass:\"envelope--field\"},[_c('div',{staticClass:\"envelope--input\"},[_c('div',{staticClass:\"input-group\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.envelope.message),expression:\"envelope.message\"}],attrs:{\"placeholder\":_vm.$t('create.comment_placeholder')},domProps:{\"value\":(_vm.envelope.message)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.envelope, \"message\", $event.target.value)}}})])])]),_c('div',{staticClass:\"envelope--field\"},[_c('div',{staticClass:\"envelope--input\"},[_c('div',{staticClass:\"input-group\"},[_c('div',{staticClass:\"input-addon\"},[_c('label',{attrs:{\"for\":\"sender\"}},[_vm._v(_vm._s(_vm.$t(\"create.from.label\"))+\": \")])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.envelope.nickname),expression:\"envelope.nickname\"}],attrs:{\"type\":\"text\",\"name\":\"sender\",\"placeholder\":_vm.$t('create.from.placeholder')},domProps:{\"value\":(_vm.envelope.nickname)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.envelope, \"nickname\", $event.target.value)}}})])])]),_c('div',{staticClass:\"envelope--input--disclaimer\"},[_c('p',[_vm._v(\"+ \"+_vm._s(_vm.claimVTHO)+\" VTHO \"+_vm._s(_vm.$t(\"create.fee\")))]),_c('p',[_vm._v(_vm._s(_vm.$t(\"create.fee_hint\")))])])]),_c('div',{staticClass:\"envelope--buttons\"},[_c('button',{staticClass:\"btn btn-create\",attrs:{\"disabled\":_vm.isCreating},on:{\"click\":function($event){return _vm.createEnvelope()}}},[_vm._v(_vm._s(_vm.isCreating ? _vm.$t(\"create.creating_btn_text\") + _vm.counter : _vm.$t(\"create.create_btn_text\")))])]),_c('div',{staticClass:\"envelope--input--disclaimer\"},[_c('p',[_c('span',[_vm._v(_vm._s(_vm.$t(\"license\")))])])])]):_c('div',[_c('ShareCard',{attrs:{\"shareLink\":_vm.shareLink}}),_c('RedPacketInfo',{attrs:{\"visitor\":_vm.envelope.creator,\"tokenName\":_vm.tokenName,\"envelope\":_vm.envelope}})],1)])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Create.vue?vue&type=template&id=1a53ff09&scoped=true&\"\nimport script from \"./Create.vue?vue&type=script&lang=js&\"\nexport * from \"./Create.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Create.vue?vue&type=style&index=0&id=1a53ff09&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a53ff09\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}