{"version":3,"sources":["webpack:///./src/views/Create.vue?5e21","webpack:///./src/views/Create.vue?25ca","webpack:///src/views/Create.vue","webpack:///./src/views/Create.vue?2e8f","webpack:///./src/views/Create.vue?6aca"],"names":["_node_modules_mini_css_extract_plugin_0_5_0_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_7_0_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_2_0_1_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_7_0_vue_loader_lib_index_js_vue_loader_options_Create_vue_vue_type_style_index_0_id_1f99fbcb_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_0_5_0_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_7_0_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_2_0_1_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_7_0_vue_loader_lib_index_js_vue_loader_options_Create_vue_vue_type_style_index_0_id_1f99fbcb_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","id","to","name","_v","href","accountLink","target","_s","account","balance","tokenName","_l","error","index","key","_e","directives","rawName","value","expression","on","change","$event","$$selectedVal","Array","prototype","filter","call","options","o","selected","map","val","_value","multiple","onTokenChange","envelope","envelopeType","for","type","min","placeholder","domProps","input","composing","$set","click","togglePacketType","step","max","claimVTHO","disabled","isCreating","createEnvelope","counter","staticRenderFns","ipfs","src_default","a","host","port","protocol","VTHO_PER_CLAIMER","Createvue_type_script_lang_js_","components","CertModal","beforeCreate","_this","window","connex","signingService","vendor","sign","request","purpose","payload","content","then","result","annex","signer","$config","accountBaseUrl","location","encodeURIComponent","mounted","$ticker","thor","ticker","destroyed","clearInterval","cTicker","data","showMsg","hasErr","errors","created","secretWallet","shareLink","nickname","amount","claimers","duration","initialBalance","message","messageLink","tokenAddress","computed","methods","_this2","tokenAddr","tokens","balanceOfABI","constant","inputs","outputs","payable","stateMutability","method","bignumber_default","decoded","dividedBy","Math","pow","toFixed","catch","err","console","acc","get","accInfo","checkForm","push","calcAmountInEther","gt","length","holdBalance","isLessThanOrEqualTo","_this3","toString","utils","createWallet","setInterval","refreshCounter","add","sendCreateTx","buildCreateClauses","newEnvelopeABI","newTokenEnvelopeABI","contract","clauses","amountInWei","multipliedBy","clause","asClause","address","Object","objectSpread","comment","tokenContract","approveABI","approveClause","concat","_clause","buildEnergyClause","transferABI","transferMethod","_this4","createClauses","energyCluase","gas","getReceipt","txid","receipt","reverted","createEvent","findCreateEvent","envelopeId","topics","log","parseInt","origin","pathPrefix","btoa","privateKey","localStorage","setItem","_this5","next","transaction","i","output","j","events","views_Createvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/create.fa997d7a.js","sourcesContent":["import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.5.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=style&index=0&id=1f99fbcb&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.5.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=style&index=0&id=1f99fbcb&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app\"},[_c('header',{staticClass:\"navbar navbar-default\",attrs:{\"id\":\"header\"}},[_c('div',{staticClass:\"container-fluid header\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-sm-3 col-xs-12 navbar-header header--logo\"},[_c('h3',[_c('router-link',{attrs:{\"to\":{ name: 'home'}}},[_vm._v(\"Lucky Airdrop\")])],1)]),_c('div',{staticClass:\"col-sm-6 hidden-xs header--thor-info\"},[_c('div',{staticClass:\"header--thor-info--wrap text-center\"},[_c('div',[_c('strong',[_vm._v(\"Account: \")]),_c('span',[_c('a',{attrs:{\"href\":_vm.accountLink,\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.account))])])]),_vm._v(\" |\\n            \"),_c('div',[_c('strong',[_vm._v(\"Balance: \")]),_vm._v(_vm._s(_vm.balance)+\" \"+_vm._s(_vm.tokenName))])])])])])]),_c('div',{staticClass:\"container\"},[(!_vm.account)?_c('CertModal'):_c('div',[_c('div',{staticClass:\"container-fluid create-form\",attrs:{\"id\":\"content-area\"}},[(_vm.hasErr)?_c('div',{staticClass:\"alert envelope-alert\"},[_c('b',[_vm._v(\"Please correct the following error(s):\")]),_c('ul',_vm._l((_vm.errors),function(error,index){return _c('li',{key:index},[_vm._v(_vm._s(error))])}),0)]):_vm._e(),_c('div',{staticClass:\"container-fluid envelope-container envelope-container--create\"},[_c('div',{staticClass:\"envelope--title\"},[_c('h4',[_vm._v(\"Create Your Red Envelope\")])]),_c('hr'),_c('div',{staticClass:\"envelope--content\"},[_c('div',{staticClass:\"envelope--field\"},[_c('div',{staticClass:\"envelope--input\"},[_c('div',{staticClass:\"input-group\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tokenName),expression:\"tokenName\"}],on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.tokenName=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.onTokenChange]}},[_c('option',{attrs:{\"value\":\"VET\",\"selected\":\"\"}},[_vm._v(\"VET\")]),_c('option',{attrs:{\"value\":\"VTHO\"}},[_vm._v(\"VTHO\")]),_c('option',{attrs:{\"value\":\"OCE\"}},[_vm._v(\"OCE\")]),_c('option',{attrs:{\"value\":\"PLA\"}},[_vm._v(\"PLA\")]),_c('option',{attrs:{\"value\":\"TIC\"}},[_vm._v(\"TIC\")]),_c('option',{attrs:{\"value\":\"SHA\"}},[_vm._v(\"SHA\")])])])])])]),_c('div',{staticClass:\"envelope--content\"},[_c('div',{staticClass:\"envelope--field\"},[_c('div',{staticClass:\"envelope--input\"},[_c('div',{staticClass:\"input-group\"},[_c('div',{staticClass:\"input-addon\"},[(_vm.envelope.envelopeType == 0)?_c('label',{attrs:{\"for\":\"amount\"}},[_vm._v(\"Amount Each\")]):(_vm.envelope.envelopeType == 1)?_c('label',{attrs:{\"for\":\"amount\"}},[_vm._v(\"Total\")]):_vm._e()]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.envelope.amount),expression:\"envelope.amount\"}],staticClass:\"right-align\",attrs:{\"id\":\"amount\",\"type\":\"number\",\"min\":\"0.006\",\"placeholder\":\"1.0\",\"value\":\"1.0\"},domProps:{\"value\":(_vm.envelope.amount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.envelope, \"amount\", $event.target.value)}}}),_c('div',{staticClass:\"input-addon\"},[_c('label',{attrs:{\"for\":\"amount\"}},[_vm._v(_vm._s(_vm.tokenName))])])])]),(_vm.envelope.envelopeType == 0)?_c('p',[_vm._v(\"Identical Amount.\\n                \"),_c('a',{on:{\"click\":function($event){return _vm.togglePacketType()}}},[_vm._v(\"Change to Random Amount\")])]):(_vm.envelope.envelopeType == 1)?_c('p',[_vm._v(\"Random Amount.\\n                \"),_c('a',{on:{\"click\":function($event){return _vm.togglePacketType()}}},[_vm._v(\"Change to Identical Amount\")])]):_vm._e(),_c('div',{staticClass:\"envelope--input--disclaimer\"},[_c('p',[_vm._v(\"0.5% of the total is the tip. No tip for X Node holders.\")])])])]),_c('div',{staticClass:\"envelope--content\"},[_c('div',{staticClass:\"envelope--field\"},[_c('div',{staticClass:\"envelope--input\"},[_c('div',{staticClass:\"input-group\"},[_c('div',{staticClass:\"input-addon\"},[_c('label',{attrs:{\"for\":\"quantity\"}},[_vm._v(\"Quantity\")])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.envelope.claimers),expression:\"envelope.claimers\"}],staticClass:\"right-align\",attrs:{\"id\":\"quantity\",\"type\":\"number\",\"step\":\"1\",\"min\":\"1\",\"max\":\"100\",\"placeholder\":\"Enter number\",\"value\":\"1\"},domProps:{\"value\":(_vm.envelope.claimers)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.envelope, \"claimers\", $event.target.value)}}})])]),_c('p',[_vm._v(\"Enter the number of members between 1 and 100\")])])]),_c('div',{staticClass:\"envelope--content\"},[_c('div',{staticClass:\"envelope--field\"},[_c('div',{staticClass:\"envelope--input\"},[_c('div',{staticClass:\"input-group\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.envelope.message),expression:\"envelope.message\"}],attrs:{\"placeholder\":\"Best wishes üê∂\"},domProps:{\"value\":(_vm.envelope.message)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.envelope, \"message\", $event.target.value)}}})])])]),_c('div',{staticClass:\"envelope--field\"},[_c('div',{staticClass:\"envelope--input\"},[_c('div',{staticClass:\"input-group\"},[_c('div',{staticClass:\"input-addon\"},[_c('label',{attrs:{\"for\":\"sender\"}},[_vm._v(\"From: \")])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.envelope.nickname),expression:\"envelope.nickname\"}],attrs:{\"type\":\"text\",\"name\":\"sender\",\"placeholder\":\"Anonymous\"},domProps:{\"value\":(_vm.envelope.nickname)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.envelope, \"nickname\", $event.target.value)}}})])])]),_c('div',{staticClass:\"envelope--input--disclaimer\"},[_c('p',[_vm._v(\"+ \"+_vm._s(_vm.claimVTHO)+\" VTHO fee\")]),_c('p',[_vm._v(\"This is used to pay for the transaction fee when your recipient claims the envelope.\")])])]),_c('div',{staticClass:\"envelope--buttons\"},[_c('div',{staticClass:\"envelope--buttons-row\"},[_c('div',{staticClass:\"envelope--create-button\"},[_vm._v(\"¬†\")]),_c('button',{staticClass:\"btn btn-env\",attrs:{\"disabled\":_vm.isCreating},on:{\"click\":function($event){return _vm.createEnvelope()}}},[_vm._v(_vm._s(_vm.isCreating ? 'Creating...' + _vm.counter : 'Craete'))])])]),_c('div',{staticClass:\"envelope--input--disclaimer\"},[_c('p',[_c('span',[_vm._v(\"You understand that you are using free software, provided under \"),_c('a',{attrs:{\"href\":\"https://mit-license.org/\",\"target\":\"_blank\"}},[_vm._v(\"MIT License\")]),_vm._v(\", at your own risk.\")])])])])])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"app\">\n      <header class=\"navbar navbar-default\" id=\"header\">\n        <div class=\"container-fluid header\">\n          <div class=\"row\">\n            <div class=\"col-sm-3 col-xs-12 navbar-header header--logo\">\n              <h3><router-link :to=\"{ name: 'home'}\">Lucky Airdrop</router-link></h3>\n            </div>\n\n            <div class=\"col-sm-6 hidden-xs header--thor-info\">\n              <div class=\"header--thor-info--wrap text-center\">\n                <div><strong>Account: </strong> <span><a :href=\"accountLink\" target=\"_blank\">{{ account }}</a></span></div> |\n                <div><strong>Balance: </strong>{{ balance }} {{ tokenName }}</div>\n              </div>\n            </div>\n\n          </div>\n        </div>\n      </header>\n\n      <div class=\"container\">\n        <CertModal v-if=\"!account\" />\n\n        <div v-else>\n          <div id='content-area' class='container-fluid create-form'>\n\n            <div v-if=\"hasErr\" class=\"alert envelope-alert\">\n              <b>Please correct the following error(s):</b>\n              <ul>\n                <li v-for=\"(error, index) in errors\" :key=\"index\">{{ error }}</li>\n              </ul>\n            </div>\n\n            <!-- Create Form -->\n            <div class='container-fluid envelope-container envelope-container--create'>\n              <div class='envelope--title'>\n                <h4>Create Your Red Envelope</h4>\n              </div>\n              <hr>\n\n              <div class='envelope--content'>\n                <div class='envelope--field'>\n                  <div class='envelope--input'>\n                    <div class='input-group'>\n                      <select v-model='tokenName' @change=\"onTokenChange\">\n                        <option value='VET' selected>VET</option>\n                        <option value='VTHO'>VTHO</option>\n                        <option value='OCE'>OCE</option>\n                        <option value='PLA'>PLA</option>\n                        <option value='TIC'>TIC</option>\n                        <option value='SHA'>SHA</option>\n                      </select>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div class='envelope--content'>\n                <div class='envelope--field'>\n                  <div class='envelope--input'>\n                    <div class='input-group'>\n                      <div class='input-addon'>\n                        <label v-if='envelope.envelopeType == 0' for='amount'>Amount Each</label>\n                        <label v-else-if='envelope.envelopeType == 1' for='amount'>Total</label>\n                      </div>\n                      <input\n                        id='amount'\n                        v-model='envelope.amount'\n                        type='number'\n                        min='0.006'\n                        placeholder='1.0'\n                        value='1.0'\n                        class='right-align'\n                      >\n                      <div class='input-addon'>\n                        <label for='amount'>{{ tokenName }}</label>\n                      </div>\n                    </div>\n                  </div>\n\n                  <p v-if='envelope.envelopeType == 0'>Identical Amount.\n                    <a @click='togglePacketType()'>Change to Random Amount</a>\n                  </p>\n                  <p v-else-if='envelope.envelopeType == 1'>Random Amount.\n                    <a @click='togglePacketType()'>Change to Identical Amount</a>\n                  </p>\n\n                  <div class=\"envelope--input--disclaimer\"><p>0.5% of the total is the tip. No tip for X Node holders.</p></div>\n                </div>\n              </div>\n\n              <div class='envelope--content'>\n                <div class='envelope--field'>\n                  <div class='envelope--input'>\n                    <div class='input-group'>\n                      <div class='input-addon'>\n                        <label for='quantity'>Quantity</label>\n                      </div>\n                      <input\n                        id='quantity'\n                        v-model='envelope.claimers'\n                        type='number'\n                        step='1'\n                        min='1'\n                        max='100'\n                        placeholder='Enter number'\n                        value='1'\n                        class='right-align'\n                      >\n                    </div>\n                  </div>\n                  <p>Enter the number of members between 1 and 100</p>\n                </div>\n              </div>\n\n              <div class='envelope--content'>\n                <div class='envelope--field'>\n                  <div class='envelope--input'>\n                    <div class='input-group'>\n                      <textarea placeholder='Best wishes üê∂' v-model='envelope.message'></textarea>\n                    </div>\n                  </div>\n                </div>\n                <div class='envelope--field'>\n                  <div class='envelope--input'>\n                    <div class='input-group'>\n                      <div class='input-addon'>\n                        <label for='sender'>From: </label>\n                      </div>\n                      <input type='text' name='sender' placeholder='Anonymous' v-model='envelope.nickname'>\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"envelope--input--disclaimer\">\n                  <p>+ {{claimVTHO}} VTHO fee</p>\n                  <p>This is used to pay for the transaction fee when your recipient claims the envelope.</p>\n                </div>\n              </div>\n\n              <div class='envelope--buttons'>\n                <div class='envelope--buttons-row'>\n                  <div class='envelope--create-button'>&nbsp;</div>\n                  <button :disabled=\"isCreating\" class='btn btn-env' @click='createEnvelope()'>{{isCreating ? 'Creating...' + counter : 'Craete'}}</button>\n                </div>\n              </div>\n\n              <div class=\"envelope--input--disclaimer\"><p><span>You understand that you are using free software, provided under <a href=\"https://mit-license.org/\" target=\"_blank\">MIT License</a>, at your own risk.</span></p></div>\n            </div>\n\n          </div>\n        </div>\n      </div>\n    </div>\n    \n</template>\n\n<script>\nimport BN from 'bignumber.js'\nimport Utils from '../utils'\nimport CertModal from '@/components/CertModal.vue'\n\nimport IPFS from 'ipfs-mini'\nconst ipfs = new IPFS({ host: 'ipfs.infura.io', port: 5001, protocol: 'https' })\n\n\nconst VTHO_PER_CLAIMER = 200\n\nexport default {\n  name: 'Create',\n  components: {\n    CertModal,\n  },\n  beforeCreate() {\n    if (!window.connex) {\n      location.href = 'https://env.vechain.org/r/#' + encodeURIComponent(location.href)\n    } else {\n      const signingService = connex.vendor.sign('cert')\n\n      // Generate a random string and request the identification\n      signingService.request({\n          purpose: 'identification',\n          payload: {\n              type: 'text',\n              content: 'Confirm that you would like this site to access your account'\n          }\n      }).then(result => {\n          this.account = result.annex.signer\n          this.accountLink = this.$config.accountBaseUrl + '/accounts' + this.account\n\n          this.onTokenChange()\n      })\n    }\n  },\n\n  mounted() {\n    this.$ticker = connex.thor.ticker()\n  },\n  destroyed() {\n    this.$ticker = null\n    clearInterval(this.cTicker)\n  },\n  \n  data() {\n    return {\n      showMsg: false,\n      hasErr: false,\n      errors: [],\n      isCreating: false,\n      account: '',\n      accountLink: '',\n      tokenName: 'VET',\n      balance: '',\n      created: false,\n      secretWallet: {},\n      shareLink: '',\n      counter: 20,\n      cTicker: null,\n      envelope: {\n        id: null,\n        envelopeType: 0,\n        nickname: '',\n        amount: 1,\n        claimers: 10,\n        duration: 86400,\n        initialBalance: '',\n        message: '',\n        messageLink: '',\n        tokenAddress: '0x0000000000000000000000000000000000000000',\n      }\n    }\n  },\n\n  computed: {\n    claimVTHO() {\n      return VTHO_PER_CLAIMER * this.envelope.claimers\n    }\n  },\n\n  methods: {\n    onTokenChange() {\n      this.balance = '0' // clean up the old value first\n\n      if (this.account) {\n        // get account balance\n          let tokenAddr = this.$config.tokens[this.tokenName]\n          this.envelope.tokenAddress = tokenAddr\n          \n          if (tokenAddr) {\n            let balanceOfABI = {\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"name\":\"balance\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}\n\n            connex.thor.account(tokenAddr).method(balanceOfABI).call(this.account).then(balance => {\n              this.balance = (new BN(balance.decoded.balance)).dividedBy(10**18).toFixed(2)\n            })\n            .catch(err => {\n              console.error(err)\n              this.errors = ['fail to connect the blockchain network']\n              this.hasErr = true\n            })\n          } else {\n            // VET\n            this.envelope.tokenAddress = '0x0000000000000000000000000000000000000000'\n\n            const acc = connex.thor.account(this.account)\n            acc.get().then(accInfo => {\n              this.balance = (new BN(accInfo.balance, 16)).dividedBy(10**18).toFixed(2)\n            })\n            .catch(err => {\n              console.error(err)\n              this.errors = ['fail to connect the blockchain network']\n              this.hasErr = true\n            })\n          }\n      }\n    },\n    togglePacketType() {\n      this.envelope.envelopeType = this.envelope.envelopeType == 0 ? 1 : 0\n    },\n    checkForm() {\n      this.hasErr = false\n      this.errors = []\n      let envelope = this.envelope\n\n      if (!envelope.amount) {\n        this.errors.push('Amount: can not be empty')\n      }\n      if (this.calcAmountInEther().gt(1000000)) {\n        this.errors.push('Total: must be less than 100W')\n      }\n      if (envelope.claimers < 0 || envelope.claimers > 100) {\n        this.errors.push('Quantity: must be between 1 and 100')\n      }\n      if (envelope.message.length > 260) {\n        this.errors.push('Message: must be less than 260 characters')\n      }\n      let holdBalance = (new BN(this.balance))\n      if (holdBalance.isLessThanOrEqualTo(this.calcAmountInEther())) {\n        this.errors.push('Balance: insufficient balance')\n      }\n      if (envelope.nickname.length > 64) {\n        this.errors.push('Nickname: must be less than 64 characters')\n      }\n\n      this.hasErr = this.errors.length > 0\n      return !this.hasErr\n    },\n    createEnvelope() {\n      // 1. validate form\n      if (!this.checkForm()) return\n\n      this.isCreating = true\n      this.envelope.initialBalance = this.calcAmountInEther().toString(10)\n\n      // 2. generate secret signer key pair\n      this.secretWallet = Utils.createWallet()\n\n      this.cTicker = setInterval(this.refreshCounter, 1000)\n\n      // 3. upload message to the IPFS\n      // 4. sign & send tx\n      if (this.envelope.message) {\n        ipfs.add(this.envelope.message).then(messageLink => {\n          this.envelope.messageLink = messageLink\n        })\n        .catch(err => {\n          console.error(err)\n          this.errors = ['Upload message failed!']\n          this.hasErr = true\n        })\n        .then(() => {\n          return this.sendCreateTx()\n        })\n      } else {\n        this.sendCreateTx()\n      }\n    },\n    calcAmountInEther() {\n      let amount = this.envelope.envelopeType == 0 ? (this.envelope.amount * this.envelope.claimers) : this.envelope.amount\n      return new BN(amount) // in ether\n    },\n    buildCreateClauses() {\n      let envelope = this.envelope\n      let newEnvelopeABI = {\"constant\":false,\"inputs\":[{\"name\":\"_envelopeType\",\"type\":\"uint8\"},{\"name\":\"_nickname\",\"type\":\"string\"},{\"name\":\"_duration\",\"type\":\"uint64\"},{\"name\":\"_messageLink\",\"type\":\"string\"},{\"name\":\"_maxClaims\",\"type\":\"uint64\"},{\"name\":\"_secretSigner\",\"type\":\"address\"}],\"name\":\"newEnvelope\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"}\n      let newTokenEnvelopeABI = {\"constant\":false,\"inputs\":[{\"name\":\"_envelopeType\",\"type\":\"uint8\"},{\"name\":\"_amount\",\"type\":\"uint256\"},{\"name\":\"_nickname\",\"type\":\"string\"},{\"name\":\"_duration\",\"type\":\"uint64\"},{\"name\":\"_messageLink\",\"type\":\"string\"},{\"name\":\"_maxClaims\",\"type\":\"uint64\"},{\"name\":\"_secretSigner\",\"type\":\"address\"},{\"name\":\"_tokenAddr\",\"type\":\"address\"}],\"name\":\"newVIP180Envelope\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}\n\n      let contract = connex.thor.account(this.$config.contract)\n\n      let clauses = []\n      let duration = 86400 // default expires in 1 day\n      let amount = this.calcAmountInEther()\n      let amountInWei = amount.multipliedBy(10**18)\n\n      if (this.tokenName == 'VET') {\n        let clause = contract.method(newEnvelopeABI)\n                          .value(amountInWei.toString(10))\n                          .asClause(\n                            envelope.envelopeType,\n                            envelope.nickname,\n                            duration,\n                            envelope.messageLink,\n                            envelope.claimers,\n                            this.secretWallet.address\n                          )\n        clauses.push({comment: 'Create Your Red Envelope', ...clause})\n      } else {\n        let tokenContract = connex.thor.account(this.$config.tokens[this.tokenName])\n        let approveABI = {\"constant\": false, \"inputs\": [{\"name\": \"_spender\", \"type\": \"address\"}, { \"name\": \"_value\", \"type\": \"uint256\"}],\"name\": \"approve\",\"outputs\": [],\"payable\": false,\"stateMutability\": \"nonpayable\",\"type\": \"function\"}\n\n        let approveClause = tokenContract.method(approveABI).asClause(this.$config.contract, amountInWei.toString(10))\n        clauses.push({comment: `Approve Envelope Contract ${amount.toString(10)} ${this.tokenName}`, ...approveClause})\n\n        let clause = contract.method(newTokenEnvelopeABI)\n                            .asClause(\n                              envelope.envelopeType,\n                              amountInWei.toString(10),\n                              envelope.nickname,\n                              duration,\n                              envelope.messageLink,\n                              envelope.claimers,\n                              this.secretWallet.address,\n                              envelope.tokenAddress\n                            )\n        clauses.push({comment: 'Create Your Red Envelope', ...clause})\n      }\n\n      return clauses\n    },\n    buildEnergyClause() {\n      let transferABI = {\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"transfer\",\"outputs\":[{\"name\":\"success\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}\n      let transferMethod = connex.thor.account(this.$config.tokens['VTHO']).method(transferABI)\n\n      let amount = VTHO_PER_CLAIMER * this.envelope.claimers\n      let amountInWei = (new BN(amount)).multipliedBy(10**18).toString(10)\n      return {comment: `Pay ${amount} VTHO for your claimers`, ...transferMethod.asClause(this.secretWallet.address, amountInWei)}\n    },\n    sendCreateTx() {\n      let signingService = connex.vendor.sign('tx')\n      let createClauses = this.buildCreateClauses()\n      let energyCluase = this.buildEnergyClause()\n\n      return signingService\n        .gas(500000)\n        .signer(this.account)\n        .request(createClauses.concat(energyCluase))\n        .then(result => {\n          return this.getReceipt(result.txid).then(receipt => {\n            this.isCreating = false\n\n            if(receipt.reverted) {\n              this.errors = ['transaction has been reverted']\n              this.hasErr = true\n              return\n            }\n\n            let createEvent = this.findCreateEvent(receipt)\n            let envelopeId = createEvent.topics[1]\n            \n            console.log('Red Envelope Id:', envelopeId)\n            \n            this.envelope.id = parseInt(envelopeId)\n\n            this.shareLink = window.location.origin + this.$config.pathPrefix + `/#/claim/${this.envelope.id}/${btoa(this.secretWallet.privateKey)}`\n            localStorage.setItem(`shareLink#${this.envelope.id}`, this.shareLink);\n            window.location.href = this.shareLink;\n          })\n        })\n        .catch(err => {\n          console.error(err)\n          this.isCreating = false\n          this.errors = ['It seems you rejected the transaction. Try again?']\n          this.hasErr = true\n        })\n    },\n    getReceipt(txid) {\n      return this.$ticker.next().then(() => {\n          return connex.thor.transaction(txid).getReceipt().then(receipt => {\n              if (!receipt) {\n                return this.getReceipt(txid)\n              }\n              return receipt\n            })\n        }).catch(err => {\n          console.error(err)\n          this.errors = ['fail to create the envelope']\n          this.hasErr = true\n        })\n    },\n\n    findCreateEvent(receipt) {\n      for (let i = 0; i < receipt.outputs.length; i++) {\n        let output = receipt.outputs[i]\n        for (let j = 0; j < output.events.length; j++) {\n          if (output.events[j].address == this.$config.contract) {\n            return output.events[j]\n          }\n        }\n      }\n    },\n    refreshCounter() {\n      if (this.counter == 0) {\n        this.counter = 20\n      }\n      this.counter--\n    }\n  }\n  \n}\n</script>\n\n<style scoped>\n  .cls-1{fill:#d8d8d8;}.cls-2{fill:#e1e7ec;}.cls-3{fill:#eb423e;}.cls-4{fill:#fbb03b;}.cls-5{fill:#7ac943;}.cls-6{fill:#fff;}.cls-7{fill:none;stroke:#eb423e;stroke-miterlimit:10;stroke-width:5px;}\n</style>\n","import mod from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Create.vue?vue&type=template&id=1f99fbcb&scoped=true&\"\nimport script from \"./Create.vue?vue&type=script&lang=js&\"\nexport * from \"./Create.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Create.vue?vue&type=style&index=0&id=1f99fbcb&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1f99fbcb\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}