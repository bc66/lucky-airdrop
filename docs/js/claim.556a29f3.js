(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["claim"],{"19f9":function(e,t,n){var r=n("2d2c"),i=n("1dff"),s=n("201d");e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*s(function(){n(1)}),"Object",a)}},2353:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var r=n("c099"),i=n.n(r),s=n("c2e7");class a{constructor(e){this.profile=e}encode(e){const t=o(e,this.profile,"");return s["encode"](t)}decode(e){const t=s["decode"](e);return c(t,this.profile,"")}}function o(e,t,n){n=n?n+"."+t.name:t.name;const r=t.kind;if(r instanceof a.ScalarKind)return r.data(e,n).encode();if(Array.isArray(r))return r.map(t=>o(e[t.name],t,n));l(Array.isArray(e),n,"expected array");const i=r.item;return e.map((e,t)=>o(e,{name:"#"+t,kind:i},n))}function c(t,n,r){r=r?r+"."+n.name:n.name;const i=n.kind;if(i instanceof a.ScalarKind)return i instanceof a.RawKind||l(e.isBuffer(t),r,"expected Buffer"),i.buffer(t,r).decode();if(Array.isArray(i)){l(Array.isArray(t),r,"expected array");const e=t;return l(e.length===i.length,r,`expected ${i.length} items, but got ${e.length}`),i.reduce((t,n,i)=>{return t[n.name]=c(e[i],n,r),t},{})}l(Array.isArray(t),r,"expected array");const s=i.item;return t.map((e,t)=>c(e,{name:"#"+t,kind:s},r))}function l(e,t,n){if(!e)throw new d(`${t}: ${n}`)}function u(e){return/^0x[0-9a-f]*$/i.test(e)}function f(e){return/^[0-9]+$/.test(e)}(function(t){class n{}t.ScalarKind=n;class r extends n{data(e,t){return{encode(){return e}}}buffer(e,t){return{decode(){return e}}}}t.RawKind=r;class s extends n{constructor(e){super(),this.maxBytes=e}data(t,n){if(l("string"===typeof t||"number"===typeof t,n,"expected string or number"),"string"===typeof t){const e=u(t),r=f(t);l(e||r,n,"expected non-negative integer in hex or dec string"),e&&l(t.length>2,n,"expected valid hex string")}else l(Number.isSafeInteger(t)&&t>=0,n,"expected non-negative safe integer");const r=new i.a(t);if(r.isZero())return{encode(){return e.alloc(0)}};let s=r.toString(16);return s.length%2!==0&&(s="0"+s),l(!this.maxBytes||s.length<=2*this.maxBytes,n,`expected number in ${this.maxBytes} bytes`),{encode(){return e.from(s,"hex")}}}buffer(e,t){return l(!this.maxBytes||e.length<=this.maxBytes,t,`expected less than ${this.maxBytes} bytes`),l(0===e.length||0!==e[0],t,"expected canonical integer (no leading zero bytes)"),{decode(){if(0===e.length)return 0;const t=new i.a(e.toString("hex"),16),n=t.toNumber();return Number.isSafeInteger(n)?n:"0x"+t.toString(16)}}}}t.NumericKind=s;class a extends n{data(t,n){return l(u(t),n,"expected hex string"),l(t.length%2===0,n,"expected even length hex"),{encode(){return e.from(t.slice(2),"hex")}}}buffer(e,t){return{decode(){return"0x"+e.toString("hex")}}}}t.BlobKind=a;class o extends a{constructor(e){super(),this.bytes=e}data(e,t){const n=super.data(e,t);return l(e.length===2*this.bytes+2,t,`expected hex string presents ${this.bytes} bytes`),n}buffer(e,t){const n=super.buffer(e,t);return l(e.length===this.bytes,t,`expected ${this.bytes} bytes`),n}}t.FixedBlobKind=o;class c extends o{data(t,n){return t?super.data(t,n):{encode(){return e.alloc(0)}}}buffer(e,t){return 0===e.length?{decode(){return null}}:super.buffer(e,t)}}t.NullableFixedBlobKind=c;class d extends o{data(t,n){const r=super.data(t,n).encode();return{encode(){const t=r.findIndex(e=>0!==e);return t>=0?r.slice(t):e.alloc(0)}}}buffer(e,t){l(e.length<=this.bytes,t,`expected less than ${this.bytes} bytes`),l(0===e.length||0!==e[0],t,"expected no leading zero bytes");const n=this.bytes;return{decode(){const t="0".repeat(2*(n-e.length));return"0x"+t+e.toString("hex")}}}}t.CompactFixedBlobKind=d})(a||(a={}));class d extends Error{constructor(e){super(e),this.name=d.name}}}).call(this,n("1c3f").Buffer)},"2f4d":function(e,t,n){"use strict";(function(e){n("48fb");var r=n("1f10"),i=n.n(r),s=n("0d1e"),a=n.n(s),o=n("a1fe"),c=n("6fea"),l=n("3949"),u=n("a911"),f=2e5,d=new a.a({host:"ipfs.infura.io",port:5001,protocol:"https"});t["a"]={name:"ClaimCard",components:{AfterClaimCard:o["a"]},props:{visitor:String,tokenName:String,envelope:Object},data:function(){return{claimed:!1,isClaiming:!1,counter:20,cTicker:null}},mounted:function(){var e=this;this.envelope.messageLink&&d.cat(this.envelope.messageLink).then(function(t){e.envelope.message=t})},destroyed:function(){clearInterval(this.cTicker)},watch:{"envelope.messageLink":function(e,t){var n=this;this.envelope.messageLink&&d.cat(e).then(function(e){n.envelope.message=e})}},methods:{claim:function(){var t=this;this.isClaiming=!0;var n=atob(this.$route.params.code),r={constant:!1,inputs:[{name:"_id",type:"uint256"},{name:"_claimerAddr",type:"address"},{name:"_signature",type:"bytes"}],name:"claimEnvelope",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},s=[{name:"id",type:"uint256"},{name:"claimer",type:"address"}],a=c["a"].encodeParameters(s,[this.envelope.id,this.visitor]),o=l["a"].secp256k1.sign(l["a"].keccak256(e.from(a.slice(2),"hex")),e.from(n.slice(2),"hex")),d=new c["a"].Function(r).encode(this.envelope.id,this.visitor,"0x"+o.toString("hex"));this.cTicker=setInterval(this.refreshCounter,1e3),fetch(this.$config.providerUrl+"/blocks/best").then(function(e){return e.json()}).then(function(r){var s=r.id.slice(0,18),a={chainTag:t.$config.chainTag,blockRef:s,expiration:360,clauses:[{to:t.$config.contract,value:"0x0",data:d}],gasPriceCoef:0,gas:f,dependsOn:null,nonce:+new Date},o=new u["a"](a),c=l["a"].blake2b256(o.encode());o.signature=l["a"].secp256k1.sign(c,e.from(n.slice(2),"hex"));var h="0x"+o.encode().toString("hex");return fetch(t.$config.providerUrl+"/transactions",{body:JSON.stringify({raw:h}),headers:{"content-type":"application/json"},method:"POST"}).then(function(e){return e.json()}).then(function(e){t.getReceipt(e.id,function(n,r){if(!n)if(t.isClaiming=!1,r.reverted)console.error("claim tx failed: TxId=".concat(e.id));else{t.claimed=!0;var s=r.outputs[0].events,a=s[s.length-1].data;t.$set(t.envelope,"totalClaimers",t.envelope.totalClaimers+1),t.$set(t.envelope,"claimed",new i.a(a,16).div(Math.pow(10,18)).toFixed(2)),localStorage.setItem("claimed:".concat(t.$config.network,"_").concat(t.envelope.id),t.visitor)}})})}).catch(function(e){console.error(e),t.isClaiming=!1})},getReceipt:function(e,t){var n=0,r=this.$config.providerUrl+"/transactions/".concat(e,"/receipt");function i(){n++,fetch(r).then(function(e){return e.json()}).then(function(e){return console.log(e),e?t(null,e):n<7?void setTimeout(i,1e4):t(new Error("fail to get receipt"),null)})}i()},refreshCounter:function(){0==this.counter&&(this.counter=20),this.counter--}}}}).call(this,n("1c3f").Buffer)},"3a23":function(e,t,n){var r=n("694f").f,i=Function.prototype,s=/^\s*function ([^ (]*)/,a="name";a in i||n("3a0f")&&r(i,a,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},4013:function(e,t,n){var r=n("aa91"),i=n("d753");n("19f9")("keys",function(){return function(e){return i(r(e))}})},4823:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app"},[n("header",{staticClass:"navbar navbar-default",attrs:{id:"header"}},[n("div",{staticClass:"container-fluid header"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-3 col-xs-12 navbar-header header--logo"},[n("h3",[n("router-link",{attrs:{to:{name:"home"}}},[e._v(e._s(e.$t("app_name")))])],1)]),n("div",{staticClass:"col-sm-6 hidden-xs header--thor-info"},[n("div",{staticClass:"header--thor-info--wrap"},[n("div",{staticClass:"header--thor-info--wrap text-center"},[n("div",[n("strong",[e._v(e._s(e.$t("account_label"))+": ")]),n("span",[n("a",{attrs:{href:e.accountLink,target:"_blank"}},[e._v(e._s(e.visitor))])])]),e._v(" |\n              "),n("div",[n("strong",[e._v(e._s(e.$t("network"))+": ")]),e._v(e._s(e.network))])])])]),n("div",{staticClass:"col-sm-3 col-xs-6 navbar-header locale-select"},[n("h5",[n("span",[n("a",{attrs:{href:"#"},on:{click:function(t){return e.setLocale("en-US")}}},[e._v("English")]),e._v(" | "),n("a",{attrs:{href:"#"},on:{click:function(t){return e.setLocale("zh-CN")}}},[e._v("简体中文")])])])])])])]),n("div",{staticClass:"container"},[e.showInptModal?n("div",{staticClass:"alert envelope--modal"},[n("div",{staticClass:"envelope--modal--container"},[n("div",{staticClass:"envelope--modal--loading"},[n("span",{staticClass:"animated"},[n("svg",{staticClass:"svg--icon-dog",attrs:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 100 100","xml:space":"preserve"}},[n("circle",{attrs:{cx:"46.2",cy:"35",r:"3.7"}}),n("path",{attrs:{d:"M63.7,31.3c-3.1-8.7-11.4-15-21.2-15l-7.5,0c-6.1,0-11.3,3.6-13.7,8.8c-5.2,2.4-8.8,7.6-8.8,13.7v30H20v15h37.5V61.2l7.5,0  c12.4,0,22.5-10.1,22.5-22.5v-7.5H63.7z M65,53.7h-7.5c-4.1,0-7.5,3.4-7.5,7.5v15H27.5v-7.5c8.3,0,15-6.7,15-15v-7.5  c0-2.1-1.7-3.7-3.8-3.7S35,44.2,35,46.3v7.5c0,4.1-3.4,7.5-7.5,7.5l-7.5,0V38.8c0-4.1,3.4-7.5,7.5-7.5c0-4.1,3.4-7.5,7.5-7.5h7.5  c8.3,0,15,6.7,15,15H65h15C80,47,73.3,53.7,65,53.7z"}})])])]),n("div",{staticClass:"envelope--modal--details"},[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"envelope--field"},[n("h3",[e._v("Input your address")]),e._m(0),n("div",{staticClass:"envelope--input"},[n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.address,expression:"address"}],class:{"has-error":!e.isAddress()},attrs:{type:"text",placeholder:"0x"},domProps:{value:e.address},on:{input:function(t){t.target.composing||(e.address=t.target.value)}}})])])]),n("div",{staticClass:"envelope--create-button--close"},[n("button",{attrs:{disabled:!e.isAddress()},on:{click:e.handleContinue}},[n("h4",[e._v("Continue")])])])])])])]):e._e(),n("ShareCard",{attrs:{shareLink:e.shareLink}}),"creator"==e.role?n("RedPacketInfo",{attrs:{visitor:e.visitor,envelope:e.envelope,tokenName:e.tokenName}}):"claimer"==e.role&&"0.00"==e.envelope.claimed&&"2"!=e.envelope.status?n("ClaimCard",{attrs:{visitor:e.visitor,envelope:e.envelope,tokenName:e.tokenName}}):"claimer"==e.role&&"0.00"!=e.envelope.claimed?n("AfterClaimCard",{attrs:{envelope:e.envelope,tokenName:e.tokenName}}):n("RedPacketInfo",{attrs:{visitor:e.visitor,envelope:e.envelope,tokenName:e.tokenName}}),n("CertModal",{directives:[{name:"show",rawName:"v-show",value:e.showCertModal,expression:"showCertModal"}]})],1)])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h4",[n("span",[e._v("Please input your wallet address to catch your luck.")]),n("br")])}],s=n("f7bf"),a=s["a"],o=(n("f1eb"),n("17cc")),c=Object(o["a"])(a,r,i,!1,null,"044f5224",null);t["default"]=c.exports},"612f":function(e,t,n){for(var r=n("5c07"),i=n("d753"),s=n("7f00"),a=n("4839"),o=n("c84b"),c=n("f03e"),l=n("f3ae"),u=l("iterator"),f=l("toStringTag"),d=c.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(h),v=0;v<p.length;v++){var m,g=p[v],w=h[g],y=a[g],b=y&&y.prototype;if(b&&(b[u]||o(b,u,d),b[f]||o(b,f,g),c[g]=d,w))for(m in r)b[m]||s(b,m,r[m],!0)}},a1fe:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid envelope-wrap"},[n("div",{staticClass:"envelope-wrap--title"},[n("h2",[e._v(e._s(e.$t("claim.claimed_text"))+" "+e._s(e.envelope.claimed)+" "+e._s(e.tokenName)+".")])]),n("div",{staticClass:"container-fluid envelope-container envelope-container--claim"},[n("div",{staticClass:"container-fluid envelope-info"},[n("div",{staticClass:"row envelope-info--top"},[n("div",{staticClass:"col-xs-5 left-align"},[e._v(e._s(e.$t("envelope"))+" #"+e._s(e.envelope.id))]),n("div",{staticClass:"col-xs-7 right-align"},[e.envelope.duration>0?n("span",[e._v("\n            Expires\n            "),n("time",{attrs:{datetime:"2019-03-04T15:58:09.000Z",title:"2019-03-04 15:58"}},[e._v("in "+e._s(e._f("duration")(1e3*e.envelope.duration,"humanize")))])]):n("span",[e._v(e._s(e.$t("expired")))])])]),n("div",[n("svg",{staticClass:"svg--icon-dog",attrs:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 100 100","xml:space":"preserve"}},[n("circle",{attrs:{cx:"46.2",cy:"35",r:"3.7"}}),n("path",{attrs:{d:"M63.7,31.3c-3.1-8.7-11.4-15-21.2-15l-7.5,0c-6.1,0-11.3,3.6-13.7,8.8c-5.2,2.4-8.8,7.6-8.8,13.7v30H20v15h37.5V61.2l7.5,0  c12.4,0,22.5-10.1,22.5-22.5v-7.5H63.7z M65,53.7h-7.5c-4.1,0-7.5,3.4-7.5,7.5v15H27.5v-7.5c8.3,0,15-6.7,15-15v-7.5  c0-2.1-1.7-3.7-3.8-3.7S35,44.2,35,46.3v7.5c0,4.1-3.4,7.5-7.5,7.5l-7.5,0V38.8c0-4.1,3.4-7.5,7.5-7.5c0-4.1,3.4-7.5,7.5-7.5h7.5  c8.3,0,15,6.7,15,15H65h15C80,47,73.3,53.7,65,53.7z"}})])]),n("div",{staticClass:"envelope-info--price"},[n("h2",[e._v(e._s(e.envelope.initialBalance||0)+" "+e._s(e.tokenName))])]),n("div",{staticClass:"envelope-info--claim-details"},[n("p",[n("span",[e._v(e._s(e.$t("claim.total_claims"))+": "+e._s(e.envelope.totalClaimers||0))])])]),n("div",{staticClass:"envelope-info--message"},[n("h2",[e._v(e._s(e.envelope.message||e.$t("create.comment_placeholder")))]),n("p",[e._v("– "+e._s(e.envelope.nickname||e.$t("create.from.placeholder")))])])])])])},i=[],s=n("0d1e"),a=n.n(s),o=new a.a({host:"ipfs.infura.io",port:5001,protocol:"https"}),c={name:"AfterClaimCard",props:{tokenName:String,envelope:Object},mounted:function(){var e=this;this.envelope.messageLink&&o.cat(this.envelope.messageLink).then(function(t){e.envelope.message=t})},watch:{"envelope.messageLink":function(e,t){var n=this;this.envelope.messageLink&&o.cat(e).then(function(e){n.envelope.message=e})}},methods:{}},l=c,u=n("17cc"),f=Object(u["a"])(l,r,i,!1,null,null,null);t["a"]=f.exports},a911:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var r=n("45c6"),i=n("23a6"),s=n("1b3a"),a=n("2353");class o{static decode(t){try{const r=c.decode(t);return new o(r)}catch(n){const r=l.decode(t),i=r.signature;delete r.signature;const s=new o(r);return s.signature=e.from(i.slice(2),"hex"),s}}constructor(e){this.body=Object.assign({},e,{reserved:e.reserved||[]})}get id(){if(!this.signature)return null;try{const t=Object(r["a"])(c.encode(this.body)),n=i["a"].recover(t,this.signature),a=Object(s["b"])(n);return"0x"+Object(r["a"])(t,a).toString("hex")}catch(e){return null}}get signer(){if(!this.signature)return null;try{const t=Object(r["a"])(c.encode(this.body)),n=i["a"].recover(t,this.signature);return"0x"+Object(s["b"])(n).toString("hex")}catch(e){return null}}get intrinsicGas(){return o.intrinsicGas(this.body.clauses)}encode(){if(this.signature){const e="0x"+this.signature.toString("hex");return l.encode(Object.assign({},this.body,{signature:e}))}return c.encode(this.body)}}(function(e){function t(e){const t=5e3,r=16e3,i=48e3;return 0===e.length?t+r:e.reduce((e,t)=>{return t.to?e+=r:e+=i,e+=n(t.data),e},t)}function n(e){const t=4,n=68;let r=0;for(let i=2;i<e.length;i+=2)"00"===e.substr(i,2)?r+=t:r+=n;return r}e.intrinsicGas=t})(o||(o={}));const c=new a["a"]({name:"tx",kind:[{name:"chainTag",kind:new a["a"].NumericKind(1)},{name:"blockRef",kind:new a["a"].CompactFixedBlobKind(8)},{name:"expiration",kind:new a["a"].NumericKind(4)},{name:"clauses",kind:{item:[{name:"to",kind:new a["a"].NullableFixedBlobKind(20)},{name:"value",kind:new a["a"].NumericKind(32)},{name:"data",kind:new a["a"].BlobKind}]}},{name:"gasPriceCoef",kind:new a["a"].NumericKind(1)},{name:"gas",kind:new a["a"].NumericKind(8)},{name:"dependsOn",kind:new a["a"].NullableFixedBlobKind(32)},{name:"nonce",kind:new a["a"].NumericKind(8)},{name:"reserved",kind:new a["a"].RawKind}]}),l=new a["a"]({name:"tx",kind:[...c.profile.kind,{name:"signature",kind:new a["a"].BlobKind}]})}).call(this,n("1c3f").Buffer)},b5ad:function(e,t,n){"use strict";var r=n("caa4")(!0);n("1145")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},be2a:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function i(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){return r(e)||i(e)||s()}n.d(t,"a",function(){return a})},be61:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}function i(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0)if(n.push(a.value),t&&n.length===t)break}catch(c){i=!0,s=c}finally{try{r||null==o["return"]||o["return"]()}finally{if(i)throw s}}return n}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){return r(e)||i(e,t)||s()}n.d(t,"a",function(){return a})},c099:function(e,t,n){var r;(function(i){"use strict";var s,a=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,c=Math.floor,l="[BigNumber Error] ",u=l+"Number primitive has more than 15 significant digits: ",f=1e14,d=14,h=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],v=1e7,m=1e9;function g(e){var t,n,r,i=R.prototype={constructor:R,toString:null,valueOf:null},s=new R(1),S=20,A=4,O=-7,L=21,E=-1e7,$=1e7,M=!1,B=1,I=0,T={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:" ",fractionGroupSize:0},P="0123456789abcdefghijklmnopqrstuvwxyz";function R(e,t){var i,s,o,l,f,p,v,m,g=this;if(!(g instanceof R))return new R(e,t);if(null==t){if(e instanceof R)return g.s=e.s,g.e=e.e,void(g.c=(e=e.c)?e.slice():e);if(p="number"==typeof e,p&&0*e==0){if(g.s=1/e<0?(e=-e,-1):1,e===~~e){for(l=0,f=e;f>=10;f/=10,l++);return g.e=l,void(g.c=[e])}m=e+""}else{if(!a.test(m=e+""))return r(g,m,p);g.s=45==m.charCodeAt(0)?(m=m.slice(1),-1):1}(l=m.indexOf("."))>-1&&(m=m.replace(".","")),(f=m.search(/e/i))>0?(l<0&&(l=f),l+=+m.slice(f+1),m=m.substring(0,f)):l<0&&(l=m.length)}else{if(x(t,2,P.length,"Base"),m=e+"",10==t)return g=new R(e instanceof R?e:m),F(g,S+g.e+1,A);if(p="number"==typeof e,p){if(0*e!=0)return r(g,m,p,t);if(g.s=1/e<0?(m=m.slice(1),-1):1,R.DEBUG&&m.replace(/^0\.0*|\./,"").length>15)throw Error(u+e);p=!1}else g.s=45===m.charCodeAt(0)?(m=m.slice(1),-1):1;for(i=P.slice(0,t),l=f=0,v=m.length;f<v;f++)if(i.indexOf(s=m.charAt(f))<0){if("."==s){if(f>l){l=v;continue}}else if(!o&&(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase()))){o=!0,f=-1,l=0;continue}return r(g,e+"",p,t)}m=n(m,t,10,g.s),(l=m.indexOf("."))>-1?m=m.replace(".",""):l=m.length}for(f=0;48===m.charCodeAt(f);f++);for(v=m.length;48===m.charCodeAt(--v););if(m=m.slice(f,++v),m){if(v-=f,p&&R.DEBUG&&v>15&&(e>h||e!==c(e)))throw Error(u+g.s*e);if(l=l-f-1,l>$)g.c=g.e=null;else if(l<E)g.c=[g.e=0];else{if(g.e=l,g.c=[],f=(l+1)%d,l<0&&(f+=d),f<v){for(f&&g.c.push(+m.slice(0,f)),v-=d;f<v;)g.c.push(+m.slice(f,f+=d));m=m.slice(f),f=d-m.length}else f-=v;for(;f--;m+="0");g.c.push(+m)}}else g.c=[g.e=0]}function j(e,t,n,r){var i,s,a,o,c;if(null==n?n=A:x(n,0,8),!e.c)return e.toString();if(i=e.c[0],a=e.e,null==t)c=y(e.c),c=1==r||2==r&&a<=O?k(c,a):N(c,a,"0");else if(e=F(new R(e),t,n),s=e.e,c=y(e.c),o=c.length,1==r||2==r&&(t<=s||s<=O)){for(;o<t;c+="0",o++);c=k(c,s)}else if(t-=a,c=N(c,s,"0"),s+1>o){if(--t>0)for(c+=".";t--;c+="0");}else if(t+=s-o,t>0)for(s+1==o&&(c+=".");t--;c+="0");return e.s<0&&i?"-"+c:c}function U(e,t){var n,r,i=0;for(C(e[0])&&(e=e[0]),n=new R(e[0]);++i<e.length;){if(r=new R(e[i]),!r.s){n=r;break}t.call(n,r)&&(n=r)}return n}function D(e,t,n){for(var r=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,r++);return(n=r+n*d-1)>$?e.c=e.e=null:n<E?e.c=[e.e=0]:(e.e=n,e.c=t),e}function F(e,t,n,r){var i,s,a,l,u,h,v,m=e.c,g=p;if(m){e:{for(i=1,l=m[0];l>=10;l/=10,i++);if(s=t-i,s<0)s+=d,a=t,u=m[h=0],v=u/g[i-a-1]%10|0;else if(h=o((s+1)/d),h>=m.length){if(!r)break e;for(;m.length<=h;m.push(0));u=v=0,i=1,s%=d,a=s-d+1}else{for(u=l=m[h],i=1;l>=10;l/=10,i++);s%=d,a=s-d+i,v=a<0?0:u/g[i-a-1]%10|0}if(r=r||t<0||null!=m[h+1]||(a<0?u:u%g[i-a-1]),r=n<4?(v||r)&&(0==n||n==(e.s<0?3:2)):v>5||5==v&&(4==n||r||6==n&&(s>0?a>0?u/g[i-a]:0:m[h-1])%10&1||n==(e.s<0?8:7)),t<1||!m[0])return m.length=0,r?(t-=e.e+1,m[0]=g[(d-t%d)%d],e.e=-t||0):m[0]=e.e=0,e;if(0==s?(m.length=h,l=1,h--):(m.length=h+1,l=g[d-s],m[h]=a>0?c(u/g[i-a]%g[a])*l:0),r)for(;;){if(0==h){for(s=1,a=m[0];a>=10;a/=10,s++);for(a=m[0]+=l,l=1;a>=10;a/=10,l++);s!=l&&(e.e++,m[0]==f&&(m[0]=1));break}if(m[h]+=l,m[h]!=f)break;m[h--]=0,l=1}for(s=m.length;0===m[--s];m.pop());}e.e>$?e.c=e.e=null:e.e<E&&(e.c=[e.e=0])}return e}return R.clone=g,R.ROUND_UP=0,R.ROUND_DOWN=1,R.ROUND_CEIL=2,R.ROUND_FLOOR=3,R.ROUND_HALF_UP=4,R.ROUND_HALF_DOWN=5,R.ROUND_HALF_EVEN=6,R.ROUND_HALF_CEIL=7,R.ROUND_HALF_FLOOR=8,R.EUCLID=9,R.config=R.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(l+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(n=e[t],x(n,0,m,t),S=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(n=e[t],x(n,0,8,t),A=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&(n=e[t],C(n)?(x(n[0],-m,0,t),x(n[1],0,m,t),O=n[0],L=n[1]):(x(n,-m,m,t),O=-(L=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if(n=e[t],C(n))x(n[0],-m,-1,t),x(n[1],1,m,t),E=n[0],$=n[1];else{if(x(n,-m,m,t),!n)throw Error(l+t+" cannot be zero: "+n);E=-($=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if(n=e[t],n!==!!n)throw Error(l+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw M=!n,Error(l+"crypto unavailable");M=n}else M=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(n=e[t],x(n,0,9,t),B=n),e.hasOwnProperty(t="POW_PRECISION")&&(n=e[t],x(n,0,m,t),I=n),e.hasOwnProperty(t="FORMAT")){if(n=e[t],"object"!=typeof n)throw Error(l+t+" not an object: "+n);T=n}if(e.hasOwnProperty(t="ALPHABET")){if(n=e[t],"string"!=typeof n||/^.$|\.|(.).*\1/.test(n))throw Error(l+t+" invalid: "+n);P=n}}return{DECIMAL_PLACES:S,ROUNDING_MODE:A,EXPONENTIAL_AT:[O,L],RANGE:[E,$],CRYPTO:M,MODULO_MODE:B,POW_PRECISION:I,FORMAT:T,ALPHABET:P}},R.isBigNumber=function(e){return e instanceof R||e&&!0===e._isBigNumber||!1},R.maximum=R.max=function(){return U(arguments,i.lt)},R.minimum=R.min=function(){return U(arguments,i.gt)},R.random=function(){var e=9007199254740992,t=Math.random()*e&2097151?function(){return c(Math.random()*e)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(e){var n,r,i,a,u,f=0,h=[],v=new R(s);if(null==e?e=S:x(e,0,m),a=o(e/d),M)if(crypto.getRandomValues){for(n=crypto.getRandomValues(new Uint32Array(a*=2));f<a;)u=131072*n[f]+(n[f+1]>>>11),u>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),n[f]=r[0],n[f+1]=r[1]):(h.push(u%1e14),f+=2);f=a/2}else{if(!crypto.randomBytes)throw M=!1,Error(l+"crypto unavailable");for(n=crypto.randomBytes(a*=7);f<a;)u=281474976710656*(31&n[f])+1099511627776*n[f+1]+4294967296*n[f+2]+16777216*n[f+3]+(n[f+4]<<16)+(n[f+5]<<8)+n[f+6],u>=9e15?crypto.randomBytes(7).copy(n,f):(h.push(u%1e14),f+=7);f=a/7}if(!M)for(;f<a;)u=t(),u<9e15&&(h[f++]=u%1e14);for(a=h[--f],e%=d,a&&e&&(u=p[d-e],h[f]=c(a/u)*u);0===h[f];h.pop(),f--);if(f<0)h=[i=0];else{for(i=-1;0===h[0];h.splice(0,1),i-=d);for(f=1,u=h[0];u>=10;u/=10,f++);f<d&&(i-=d-f)}return v.e=i,v.c=h,v}}(),n=function(){var e="0123456789";function n(e,t,n,r){for(var i,s,a=[0],o=0,c=e.length;o<c;){for(s=a.length;s--;a[s]*=t);for(a[0]+=r.indexOf(e.charAt(o++)),i=0;i<a.length;i++)a[i]>n-1&&(null==a[i+1]&&(a[i+1]=0),a[i+1]+=a[i]/n|0,a[i]%=n)}return a.reverse()}return function(r,i,s,a,o){var c,l,u,f,d,h,p,v,m=r.indexOf("."),g=S,w=A;for(m>=0&&(f=I,I=0,r=r.replace(".",""),v=new R(i),h=v.pow(r.length-m),I=f,v.c=n(N(y(h.c),h.e,"0"),10,s,e),v.e=v.c.length),p=n(r,i,s,o?(c=P,e):(c=e,P)),u=f=p.length;0==p[--f];p.pop());if(!p[0])return c.charAt(0);if(m<0?--u:(h.c=p,h.e=u,h.s=a,h=t(h,v,g,w,s),p=h.c,d=h.r,u=h.e),l=u+g+1,m=p[l],f=s/2,d=d||l<0||null!=p[l+1],d=w<4?(null!=m||d)&&(0==w||w==(h.s<0?3:2)):m>f||m==f&&(4==w||d||6==w&&1&p[l-1]||w==(h.s<0?8:7)),l<1||!p[0])r=d?N(c.charAt(1),-g,c.charAt(0)):c.charAt(0);else{if(p.length=l,d)for(--s;++p[--l]>s;)p[l]=0,l||(++u,p=[1].concat(p));for(f=p.length;!p[--f];);for(m=0,r="";m<=f;r+=c.charAt(p[m++]));r=N(r,u,c.charAt(0))}return r}}(),t=function(){function e(e,t,n){var r,i,s,a,o=0,c=e.length,l=t%v,u=t/v|0;for(e=e.slice();c--;)s=e[c]%v,a=e[c]/v|0,r=u*s+a*l,i=l*s+r%v*v+o,o=(i/n|0)+(r/v|0)+u*a,e[c]=i%n;return o&&(e=[o].concat(e)),e}function t(e,t,n,r){var i,s;if(n!=r)s=n>r?1:-1;else for(i=s=0;i<n;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,i,s,a,o){var l,u,h,p,v,m,g,y,b,x,C,_,k,N,S,A,O,L=r.s==i.s?1:-1,E=r.c,$=i.c;if(!E||!E[0]||!$||!$[0])return new R(r.s&&i.s&&(E?!$||E[0]!=$[0]:$)?E&&0==E[0]||!$?0*L:L/0:NaN);for(y=new R(L),b=y.c=[],u=r.e-i.e,L=s+u+1,o||(o=f,u=w(r.e/d)-w(i.e/d),L=L/d|0),h=0;$[h]==(E[h]||0);h++);if($[h]>(E[h]||0)&&u--,L<0)b.push(1),p=!0;else{for(N=E.length,A=$.length,h=0,L+=2,v=c(o/($[0]+1)),v>1&&($=e($,v,o),E=e(E,v,o),A=$.length,N=E.length),k=A,x=E.slice(0,A),C=x.length;C<A;x[C++]=0);O=$.slice(),O=[0].concat(O),S=$[0],$[1]>=o/2&&S++;do{if(v=0,l=t($,x,A,C),l<0){if(_=x[0],A!=C&&(_=_*o+(x[1]||0)),v=c(_/S),v>1){v>=o&&(v=o-1),m=e($,v,o),g=m.length,C=x.length;while(1==t(m,x,g,C))v--,n(m,A<g?O:$,g,o),g=m.length,l=1}else 0==v&&(l=v=1),m=$.slice(),g=m.length;if(g<C&&(m=[0].concat(m)),n(x,m,C,o),C=x.length,-1==l)while(t($,x,A,C)<1)v++,n(x,A<C?O:$,C,o),C=x.length}else 0===l&&(v++,x=[0]);b[h++]=v,x[0]?x[C++]=E[k]||0:(x=[E[k]],C=1)}while((k++<N||null!=x[0])&&L--);p=null!=x[0],b[0]||b.splice(0,1)}if(o==f){for(h=1,L=b[0];L>=10;L/=10,h++);F(y,s+(y.e=h+u*d-1)+1,a,p)}else y.e=u,y.r=+p;return y}}(),r=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,n=/^\.([^.]+)$/,r=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(s,a,o,c){var u,f=o?a:a.replace(i,"");if(r.test(f))s.s=isNaN(f)?null:f<0?-1:1,s.c=s.e=null;else{if(!o&&(f=f.replace(e,function(e,t,n){return u="x"==(n=n.toLowerCase())?16:"b"==n?2:8,c&&c!=u?e:t}),c&&(u=c,f=f.replace(t,"$1").replace(n,"0.$1")),a!=f))return new R(f,u);if(R.DEBUG)throw Error(l+"Not a"+(c?" base "+c:"")+" number: "+a);s.c=s.e=s.s=null}}}(),i.absoluteValue=i.abs=function(){var e=new R(this);return e.s<0&&(e.s=1),e},i.comparedTo=function(e,t){return b(this,new R(e,t))},i.decimalPlaces=i.dp=function(e,t){var n,r,i,s=this;if(null!=e)return x(e,0,m),null==t?t=A:x(t,0,8),F(new R(s),e+s.e+1,t);if(!(n=s.c))return null;if(r=((i=n.length-1)-w(this.e/d))*d,i=n[i])for(;i%10==0;i/=10,r--);return r<0&&(r=0),r},i.dividedBy=i.div=function(e,n){return t(this,new R(e,n),S,A)},i.dividedToIntegerBy=i.idiv=function(e,n){return t(this,new R(e,n),0,1)},i.exponentiatedBy=i.pow=function(e,t){var n,r,i,a,u,f,h,p,v=this;if(e=new R(e),e.c&&!e.isInteger())throw Error(l+"Exponent not an integer: "+e);if(null!=t&&(t=new R(t)),u=e.e>14,!v.c||!v.c[0]||1==v.c[0]&&!v.e&&1==v.c.length||!e.c||!e.c[0])return p=new R(Math.pow(+v.valueOf(),u?2-_(e):+e)),t?p.mod(t):p;if(f=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new R(NaN);r=!f&&v.isInteger()&&t.isInteger(),r&&(v=v.mod(t))}else{if(e.e>9&&(v.e>0||v.e<-1||(0==v.e?v.c[0]>1||u&&v.c[1]>=24e7:v.c[0]<8e13||u&&v.c[0]<=9999975e7)))return i=v.s<0&&_(e)?-0:0,v.e>-1&&(i=1/i),new R(f?1/i:i);I&&(i=o(I/d+2))}for(u?(n=new R(.5),h=_(e)):h=e%2,f&&(e.s=1),p=new R(s);;){if(h){if(p=p.times(v),!p.c)break;i?p.c.length>i&&(p.c.length=i):r&&(p=p.mod(t))}if(u){if(e=e.times(n),F(e,e.e+1,1),!e.c[0])break;u=e.e>14,h=_(e)}else{if(e=c(e/2),!e)break;h=e%2}v=v.times(v),i?v.c&&v.c.length>i&&(v.c.length=i):r&&(v=v.mod(t))}return r?p:(f&&(p=s.div(p)),t?p.mod(t):i?F(p,I,A,a):p)},i.integerValue=function(e){var t=new R(this);return null==e?e=A:x(e,0,8),F(t,t.e+1,e)},i.isEqualTo=i.eq=function(e,t){return 0===b(this,new R(e,t))},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(e,t){return b(this,new R(e,t))>0},i.isGreaterThanOrEqualTo=i.gte=function(e,t){return 1===(t=b(this,new R(e,t)))||0===t},i.isInteger=function(){return!!this.c&&w(this.e/d)>this.c.length-2},i.isLessThan=i.lt=function(e,t){return b(this,new R(e,t))<0},i.isLessThanOrEqualTo=i.lte=function(e,t){return-1===(t=b(this,new R(e,t)))||0===t},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&0==this.c[0]},i.minus=function(e,t){var n,r,i,s,a=this,o=a.s;if(e=new R(e,t),t=e.s,!o||!t)return new R(NaN);if(o!=t)return e.s=-t,a.plus(e);var c=a.e/d,l=e.e/d,u=a.c,h=e.c;if(!c||!l){if(!u||!h)return u?(e.s=-t,e):new R(h?a:NaN);if(!u[0]||!h[0])return h[0]?(e.s=-t,e):new R(u[0]?a:3==A?-0:0)}if(c=w(c),l=w(l),u=u.slice(),o=c-l){for((s=o<0)?(o=-o,i=u):(l=c,i=h),i.reverse(),t=o;t--;i.push(0));i.reverse()}else for(r=(s=(o=u.length)<(t=h.length))?o:t,o=t=0;t<r;t++)if(u[t]!=h[t]){s=u[t]<h[t];break}if(s&&(i=u,u=h,h=i,e.s=-e.s),t=(r=h.length)-(n=u.length),t>0)for(;t--;u[n++]=0);for(t=f-1;r>o;){if(u[--r]<h[r]){for(n=r;n&&!u[--n];u[n]=t);--u[n],u[r]+=f}u[r]-=h[r]}for(;0==u[0];u.splice(0,1),--l);return u[0]?D(e,u,l):(e.s=3==A?-1:1,e.c=[e.e=0],e)},i.modulo=i.mod=function(e,n){var r,i,s=this;return e=new R(e,n),!s.c||!e.s||e.c&&!e.c[0]?new R(NaN):!e.c||s.c&&!s.c[0]?new R(s):(9==B?(i=e.s,e.s=1,r=t(s,e,0,3),e.s=i,r.s*=i):r=t(s,e,0,B),e=s.minus(r.times(e)),e.c[0]||1!=B||(e.s=s.s),e)},i.multipliedBy=i.times=function(e,t){var n,r,i,s,a,o,c,l,u,h,p,m,g,y,b,x=this,C=x.c,_=(e=new R(e,t)).c;if(!C||!_||!C[0]||!_[0])return!x.s||!e.s||C&&!C[0]&&!_||_&&!_[0]&&!C?e.c=e.e=e.s=null:(e.s*=x.s,C&&_?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=w(x.e/d)+w(e.e/d),e.s*=x.s,c=C.length,h=_.length,c<h&&(g=C,C=_,_=g,i=c,c=h,h=i),i=c+h,g=[];i--;g.push(0));for(y=f,b=v,i=h;--i>=0;){for(n=0,p=_[i]%b,m=_[i]/b|0,a=c,s=i+a;s>i;)l=C[--a]%b,u=C[a]/b|0,o=m*l+u*p,l=p*l+o%b*b+g[s]+n,n=(l/y|0)+(o/b|0)+m*u,g[s--]=l%y;g[s]=n}return n?++r:g.splice(0,1),D(e,g,r)},i.negated=function(){var e=new R(this);return e.s=-e.s||null,e},i.plus=function(e,t){var n,r=this,i=r.s;if(e=new R(e,t),t=e.s,!i||!t)return new R(NaN);if(i!=t)return e.s=-t,r.minus(e);var s=r.e/d,a=e.e/d,o=r.c,c=e.c;if(!s||!a){if(!o||!c)return new R(i/0);if(!o[0]||!c[0])return c[0]?e:new R(o[0]?r:0*i)}if(s=w(s),a=w(a),o=o.slice(),i=s-a){for(i>0?(a=s,n=c):(i=-i,n=o),n.reverse();i--;n.push(0));n.reverse()}for(i=o.length,t=c.length,i-t<0&&(n=c,c=o,o=n,t=i),i=0;t;)i=(o[--t]=o[t]+c[t]+i)/f|0,o[t]=f===o[t]?0:o[t]%f;return i&&(o=[i].concat(o),++a),D(e,o,a)},i.precision=i.sd=function(e,t){var n,r,i,s=this;if(null!=e&&e!==!!e)return x(e,1,m),null==t?t=A:x(t,0,8),F(new R(s),e,t);if(!(n=s.c))return null;if(i=n.length-1,r=i*d+1,i=n[i]){for(;i%10==0;i/=10,r--);for(i=n[0];i>=10;i/=10,r++);}return e&&s.e+1>r&&(r=s.e+1),r},i.shiftedBy=function(e){return x(e,-h,h),this.times("1e"+e)},i.squareRoot=i.sqrt=function(){var e,n,r,i,s,a=this,o=a.c,c=a.s,l=a.e,u=S+4,f=new R("0.5");if(1!==c||!o||!o[0])return new R(!c||c<0&&(!o||o[0])?NaN:o?a:1/0);if(c=Math.sqrt(+a),0==c||c==1/0?(n=y(o),(n.length+l)%2==0&&(n+="0"),c=Math.sqrt(n),l=w((l+1)/2)-(l<0||l%2),c==1/0?n="1e"+l:(n=c.toExponential(),n=n.slice(0,n.indexOf("e")+1)+l),r=new R(n)):r=new R(c+""),r.c[0])for(l=r.e,c=l+u,c<3&&(c=0);;)if(s=r,r=f.times(s.plus(t(a,s,u,1))),y(s.c).slice(0,c)===(n=y(r.c)).slice(0,c)){if(r.e<l&&--c,n=n.slice(c-3,c+1),"9999"!=n&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(F(r,r.e+S+2,1),e=!r.times(r).eq(a));break}if(!i&&(F(s,s.e+S+2,0),s.times(s).eq(a))){r=s;break}u+=4,c+=4,i=1}return F(r,r.e+S+1,A,e)},i.toExponential=function(e,t){return null!=e&&(x(e,0,m),e++),j(this,e,t,1)},i.toFixed=function(e,t){return null!=e&&(x(e,0,m),e=e+this.e+1),j(this,e,t)},i.toFormat=function(e,t){var n=this.toFixed(e,t);if(this.c){var r,i=n.split("."),s=+T.groupSize,a=+T.secondaryGroupSize,o=T.groupSeparator,c=i[0],l=i[1],u=this.s<0,f=u?c.slice(1):c,d=f.length;if(a&&(r=s,s=a,a=r,d-=r),s>0&&d>0){for(r=d%s||s,c=f.substr(0,r);r<d;r+=s)c+=o+f.substr(r,s);a>0&&(c+=o+f.slice(r)),u&&(c="-"+c)}n=l?c+T.decimalSeparator+((a=+T.fractionGroupSize)?l.replace(new RegExp("\\d{"+a+"}\\B","g"),"$&"+T.fractionGroupSeparator):l):c}return n},i.toFraction=function(e){var n,r,i,a,o,c,u,f,h,v,m,g,w=this,b=w.c;if(null!=e&&(f=new R(e),!f.isInteger()&&(f.c||1!==f.s)||f.lt(s)))throw Error(l+"Argument "+(f.isInteger()?"out of range: ":"not an integer: ")+e);if(!b)return w.toString();for(r=new R(s),v=i=new R(s),a=h=new R(s),g=y(b),c=r.e=g.length-w.e-1,r.c[0]=p[(u=c%d)<0?d+u:u],e=!e||f.comparedTo(r)>0?c>0?r:v:f,u=$,$=1/0,f=new R(g),h.c[0]=0;;){if(m=t(f,r,0,1),o=i.plus(m.times(a)),1==o.comparedTo(e))break;i=a,a=o,v=h.plus(m.times(o=v)),h=o,r=f.minus(m.times(o=r)),f=o}return o=t(e.minus(i),a,0,1),h=h.plus(o.times(v)),i=i.plus(o.times(a)),h.s=v.s=w.s,c*=2,n=t(v,a,c,A).minus(w).abs().comparedTo(t(h,i,c,A).minus(w).abs())<1?[v.toString(),a.toString()]:[h.toString(),i.toString()],$=u,n},i.toNumber=function(){return+this},i.toPrecision=function(e,t){return null!=e&&x(e,1,m),j(this,e,t,2)},i.toString=function(e){var t,r=this,i=r.s,s=r.e;return null===s?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(t=y(r.c),null==e?t=s<=O||s>=L?k(t,s):N(t,s,"0"):(x(e,2,P.length,"Base"),t=n(N(t,s,"0"),10,e,i,!0)),i<0&&r.c[0]&&(t="-"+t)),t},i.valueOf=i.toJSON=function(){var e,t=this,n=t.e;return null===n?t.toString():(e=y(t.c),e=n<=O||n>=L?k(e,n):N(e,n,"0"),t.s<0?"-"+e:e)},i._isBigNumber=!0,null!=e&&R.set(e),R}function w(e){var t=0|e;return e>0||e===t?t:t-1}function y(e){for(var t,n,r=1,i=e.length,s=e[0]+"";r<i;){for(t=e[r++]+"",n=d-t.length;n--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function b(e,t){var n,r,i=e.c,s=t.c,a=e.s,o=t.s,c=e.e,l=t.e;if(!a||!o)return null;if(n=i&&!i[0],r=s&&!s[0],n||r)return n?r?0:-o:a;if(a!=o)return a;if(n=a<0,r=c==l,!i||!s)return r?0:!i^n?1:-1;if(!r)return c>l^n?1:-1;for(o=(c=i.length)<(l=s.length)?c:l,a=0;a<o;a++)if(i[a]!=s[a])return i[a]>s[a]^n?1:-1;return c==l?0:c>l^n?1:-1}function x(e,t,n,r){if(e<t||e>n||e!==(e<0?o(e):c(e)))throw Error(l+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+e)}function C(e){return"[object Array]"==Object.prototype.toString.call(e)}function _(e){var t=e.c.length-1;return w(e.e/d)==t&&e.c[t]%2!=0}function k(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function N(e,t,n){var r,i;if(t<0){for(i=n+".";++t;i+=n);e=i+e}else if(r=e.length,++t>r){for(i=n,t-=r;--t;i+=n);e+=i}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}s=g(),s["default"]=s.BigNumber=s,r=function(){return s}.call(t,n,t,e),void 0===r||(e.exports=r)})()},c17c:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid"},[e.claimed?n("AfterClaimCard",{attrs:{envelope:e.envelope,tokenName:e.tokenName}}):n("div",{staticClass:"container-fluid envelope-wrap"},[n("div",{staticClass:"container-fluid envelope-container envelope-container--claim envelope--verified envelope-container--red envelope-container--with-card"},[n("div",{staticClass:"container-fluid envelope-info"},[n("div",{staticClass:"row envelope-info--top"},[n("div",{staticClass:"col-xs-5 left-align"},[n("p",[e._v(e._s(e.$t("envelope"))+" #"+e._s(e.envelope.id))])]),n("div",{staticClass:"col-xs-7 right-align"},[n("p",[n("span",[e._v("Expires\n                "),n("time",{attrs:{datetime:"2019-03-07T15:19:30.000Z",title:"2019-03-07 15:19"}},[e._v("in "+e._s(e._f("duration")(1e3*e.envelope.duration,"humanize")))])])])])]),n("div",[n("svg",{staticClass:"svg--icon-dog",attrs:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 100 100","xml:space":"preserve"}},[n("circle",{attrs:{cx:"46.2",cy:"35",r:"3.7"}}),n("path",{attrs:{d:"M63.7,31.3c-3.1-8.7-11.4-15-21.2-15l-7.5,0c-6.1,0-11.3,3.6-13.7,8.8c-5.2,2.4-8.8,7.6-8.8,13.7v30H20v15h37.5V61.2l7.5,0  c12.4,0,22.5-10.1,22.5-22.5v-7.5H63.7z M65,53.7h-7.5c-4.1,0-7.5,3.4-7.5,7.5v15H27.5v-7.5c8.3,0,15-6.7,15-15v-7.5  c0-2.1-1.7-3.7-3.8-3.7S35,44.2,35,46.3v7.5c0,4.1-3.4,7.5-7.5,7.5l-7.5,0V38.8c0-4.1,3.4-7.5,7.5-7.5c0-4.1,3.4-7.5,7.5-7.5h7.5  c8.3,0,15,6.7,15,15H65h15C80,47,73.3,53.7,65,53.7z"}})])]),n("div",{staticClass:"envelope-info--message"},[n("h2",[e._v(e._s(e.envelope.message||e.$t("create.comment_placeholder")))]),n("p",[e._v("– "+e._s(e.envelope.nickname||e.$t("create.from.placeholder")))])])]),n("div",{staticClass:"envelope--buttons"},[n("div",{staticClass:"envelope--input--disclaimer"},[n("p",[n("span",[e._v(e._s(e.$t("claim.hint")))])])]),n("p",[n("button",{staticClass:"btn btn-env",attrs:{disabled:e.isClaiming},on:{click:e.claim}},[e._v(e._s(e.isClaiming?e.$t("claim.claiming_btn_text")+e.counter:e.$t("claim.claim_btn_text")))])])])])])],1)},i=[],s=n("2f4d"),a=s["a"],o=n("17cc"),c=Object(o["a"])(a,r,i,!1,null,null,null);t["a"]=c.exports},c2e7:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("d018");function i(t){if(Array.isArray(t)){for(var n=[],r=0;r<t.length;r++)n.push(i(t[r]));var s=e.concat(n);return e.concat([a(s.length,192),s])}var o=v(t);return 1===o.length&&o[0]<128?o:e.concat([a(o.length,128),o])}function s(e,t){if("00"===e.slice(0,2))throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}function a(t,n){if(t<56)return e.from([t+n]);var r=d(t),i=r.length/2,s=d(n+55+i);return e.from(s+r,"hex")}function o(t,n){if(void 0===n&&(n=!1),!t||0===t.length)return e.from([]);var r=v(t),i=l(r);if(n)return i;if(0!==i.remainder.length)throw new Error("invalid remainder");return i.data}function c(t){if(!t||0===t.length)return e.from([]);var n=v(t),r=n[0];if(r<=127)return n.length;if(r<=183)return r-127;if(r<=191)return r-182;if(r<=247)return r-191;var i=r-246,a=s(n.slice(1,i).toString("hex"),16);return i+a}function l(t){var n,r,i,a,o,c=[],u=t[0];if(u<=127)return{data:t.slice(0,1),remainder:t.slice(1)};if(u<=183){if(n=u-127,i=128===u?e.from([]):t.slice(1,n),2===n&&i[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:i,remainder:t.slice(n)}}if(u<=191){if(r=u-182,n=s(t.slice(1,r).toString("hex"),16),i=t.slice(r,n+r),i.length<n)throw new Error("invalid RLP");return{data:i,remainder:t.slice(n+r)}}if(u<=247){n=u-191,a=t.slice(1,n);while(a.length)o=l(a),c.push(o.data),a=o.remainder;return{data:c,remainder:t.slice(n)}}r=u-246,n=s(t.slice(1,r).toString("hex"),16);var f=r+n;if(f>t.length)throw new Error("invalid rlp: total length is larger than the data");if(a=t.slice(r,f),0===a.length)throw new Error("invalid rlp, List has a invalid length");while(a.length)o=l(a),c.push(o.data),a=o.remainder;return{data:c,remainder:t.slice(f)}}function u(e){return"0x"===e.slice(0,2)}function f(e){return"string"!==typeof e?e:u(e)?e.slice(2):e}function d(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}function h(e){return e.length%2?"0"+e:e}function p(t){var n=d(t);return e.from(n,"hex")}function v(t){if(!e.isBuffer(t)){if("string"===typeof t)return u(t)?e.from(h(f(t)),"hex"):e.from(t);if("number"===typeof t)return t?p(t):e.from([]);if(null===t||void 0===t)return e.from([]);if(t instanceof Uint8Array)return e.from(t);if(r.isBN(t))return e.from(t.toArray());throw new Error("invalid type")}return t}t.encode=i,t.decode=o,t.getLength=c}).call(this,n("1c3f").Buffer)},caa4:function(e,t,n){var r=n("ae63"),i=n("2b11");e.exports=function(e){return function(t,n){var s,a,o=String(i(t)),c=r(n),l=o.length;return c<0||c>=l?e?"":void 0:(s=o.charCodeAt(c),s<55296||s>56319||c+1===l||(a=o.charCodeAt(c+1))<56320||a>57343?e?o.charAt(c):s:e?o.slice(c,c+2):a-56320+(s-55296<<10)+65536)}}},cb21:function(e,t,n){},f1eb:function(e,t,n){"use strict";var r=n("cb21"),i=n.n(r);i.a},f7bf:function(e,t,n){"use strict";(function(e){var r=n("be2a"),i=(n("3a23"),n("4013"),n("be61")),s=(n("612f"),n("b5ad"),n("48fb"),n("025e")),a=n("1f10"),o=n.n(a),c=n("39b2"),l=n("7886"),u=n("c17c"),f=n("a1fe"),d=n("81fc"),h=n("3949"),p=n("6fea");t["a"]={name:"Claim",components:{CertModal:c["default"],ShareCard:d["a"],RedPacketInfo:l["a"],ClaimCard:u["a"],AfterClaimCard:f["a"]},data:function(){return{network:"unkonwn",address:"",visitor:"",shareLink:window.location.href,accountLink:"",role:"",isCreator:!1,hasConnex:!1,showInptModal:!0,showCertModal:!1,tokenName:"VET",envelope:{}}},created:function(){var t=this;this.network=this.$config.network;var n,r=this.$route.params,i=r.packet_id,a=r.code;this.$set(this.envelope,"id",i);try{n=atob(a).slice(2)}catch(c){return void(window.location.href="#/404")}var o=localStorage.getItem("claimed:".concat(this.network,"_").concat(i));o&&s["a"].isAddress(o)&&(this.address=o),window.connex&&(this.hasConnex=!0,this.showInptModal=!1,this.showCertModal=!0),this.getRevealInfo().then(function(){var r=h["a"].secp256k1.derivePublicKey(e.from(n,"hex")),i="0x"+h["a"].publicKeyToAddress(r).toString("hex");if(t.envelope.secretSigner.toLowerCase()==i)if(window.connex){var s=connex.vendor.sign("cert");s.request({purpose:"identification",payload:{type:"text",content:"Confirm that you would like this site to access your account"}}).then(function(e){return t.showCertModal=!1,t.setAccount(e.annex.signer),t.getPacketInfo().then(function(){return t.setUserRole()})})}else t.handleContinue();else window.location.href="#/404"})},methods:{setLocale:function(e){localStorage.setItem("local",e),this.$i18n.locale=e},isAddress:function(){return s["a"].isAddress(this.address)},setAccount:function(e){this.visitor=e,this.accountLink=this.$config.accountBaseUrl+"/accounts"+this.visitor},handleContinue:function(){var e=this;this.isAddress()&&(this.showInptModal=!1,this.setAccount(this.address),this.getPacketInfo().then(function(){return e.setUserRole()}))},setUserRole:function(){this.role=this.envelope.creator.toLowerCase()==this.visitor.toLowerCase()?"creator":"claimer"},getPacketInfo:function(){var e=this,t=this,n={constant:!0,inputs:[{name:"_id",type:"uint256"}],name:"getEnvelopeInfo",outputs:[{name:"",type:"uint8"},{name:"",type:"uint8"},{name:"",type:"address"},{name:"",type:"string"},{name:"",type:"uint64"},{name:"",type:"string"},{name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},r={constant:!0,inputs:[{name:"_id",type:"uint256"},{name:"_claimer",type:"address"}],name:"getClaimInfo",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"};return Promise.all([this.callMethod(n,[this.envelope.id]),this.callMethod(r,[this.envelope.id,t.visitor])]).then(function(n){var r=Object(i["a"])(n,2),s=r[0],a=r[1],c=parseInt(+new Date/1e3);e.$set(t.envelope,"type",s[0]),e.$set(t.envelope,"status",s[1]),e.$set(t.envelope,"creator",s[2]),e.$set(t.envelope,"nickname",s[3]),e.$set(t.envelope,"expireAt",s[4]),e.$set(t.envelope,"duration",parseInt(s[4])-c),e.$set(t.envelope,"message",""),e.$set(t.envelope,"messageLink",s[5]),e.$set(t.envelope,"claimed",new o.a(a[0]).div(Math.pow(10,18)).toFixed(2)),t.tokenName=t.getTokenNameByAddress(t.envelope.tokenAddress)})},getRevealInfo:function(){var e=this,t={constant:!0,inputs:[{name:"_id",type:"uint256"}],name:"getEnvelopeReveal",outputs:[{name:"",type:"address"},{name:"",type:"uint64"},{name:"",type:"uint64"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"};return this.callMethod(t,[this.envelope.id]).then(function(t){e.$set(e.envelope,"tokenAddress",t[0]),e.$set(e.envelope,"claimers",parseInt(t[1])),e.$set(e.envelope,"totalClaimers",parseInt(t[2])),e.$set(e.envelope,"initialBalance",new o.a(t[3]).div(Math.pow(10,18)).toFixed(2)),e.$set(e.envelope,"remaining",new o.a(t[4]).div(Math.pow(10,18)).toFixed(2)),e.$set(e.envelope,"secretSigner",t[5])})},getTokenNameByAddress:function(e){var t=this,n="VET";return"0x0000000000000000000000000000000000000000"==e?n:(Object.keys(this.$config.tokens).forEach(function(r){t.$config.tokens[r].toLowerCase()!=e.toLowerCase()||(n=r)}),n)},callMethod:function(e,t){var n=new p["a"].Function(e),i=n.encode.apply(n,Object(r["a"])(t)),s={data:i,value:"0x0"};return this.visitor&&(s.caller=this.visitor),fetch(this.$config.providerUrl+"/accounts/".concat(this.$config.contract),{body:JSON.stringify(s),headers:{"content-type":"application/json"},method:"POST"}).then(function(e){return e.json()}).then(function(t){var n=p["a"].decodeParameters(e.outputs,t.data);return n})}}}}).call(this,n("1c3f").Buffer)}}]);
//# sourceMappingURL=claim.556a29f3.js.map