{"version":3,"sources":["webpack:///src/views/Create.vue","webpack:///./src/views/Create.vue?8381","webpack:///./src/views/Create.vue?2e8f","webpack:///./src/views/Create.vue?6aca","webpack:///./src/views/Create.vue?25e5"],"names":["ipfs","ipfs_mini__WEBPACK_IMPORTED_MODULE_8___default","a","host","port","protocol","VTHO_PER_CLAIMER","__webpack_exports__","name","components","CertModal","_components_CertModal_vue__WEBPACK_IMPORTED_MODULE_5__","ShareCard","_components_ShareCard_vue__WEBPACK_IMPORTED_MODULE_6__","RedPacketInfo","_components_RedPacketInfo_vue__WEBPACK_IMPORTED_MODULE_7__","beforeCreate","_this","this","window","connex","signingService","vendor","sign","content","request","purpose","payload","type","then","result","account","annex","signer","accountLink","$config","accountBaseUrl","sig","Buffer","from","signature","slice","signMsg","concat","domain","timestamp","accountPubK","thor_devkit__WEBPACK_IMPORTED_MODULE_4__","secp256k1","recover","blake2b256","onTokenChange","location","href","encodeURIComponent","mounted","$ticker","thor","ticker","destroyed","clearInterval","cTicker","data","showMsg","hasErr","errors","isCreating","tokenName","balance","created","secretWallet","shareLink","counter","envelope","id","envelopeType","nickname","amount","claimers","duration","initialBalance","message","messageLink","tokenAddress","computed","claimVTHO","methods","_this2","tokenAddr","tokens","balanceOfABI","constant","inputs","outputs","payable","stateMutability","method","call","bignumber_js__WEBPACK_IMPORTED_MODULE_2___default","decoded","dividedBy","Math","pow","toFixed","catch","err","console","error","acc","get","accInfo","togglePacketType","checkForm","push","calcAmountInEther","gt","length","holdBalance","isLessThanOrEqualTo","createEnvelope","_this3","toString","_utils__WEBPACK_IMPORTED_MODULE_3__","createWallet","setInterval","refreshCounter","add","sendCreateTx","buildCreateClauses","newEnvelopeABI","newTokenEnvelopeABI","contract","clauses","amountInWei","multipliedBy","clause","value","asClause","address","Object","_Users_channer_Projects_workspace_dapps_lucky_airdrop_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","comment","tokenContract","approveABI","approveClause","_clause","buildEnergyClause","transferABI","transferMethod","_this4","createClauses","energyCluase","gas","getReceipt","txid","receipt","reverted","createEvent","findCreateEvent","envelopeId","topics","log","parseInt","origin","pathPrefix","btoa","privateKey","encrypted","encrypt","localStorage","setItem","_this5","next","transaction","i","output","j","events","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","to","_v","target","_s","_l","index","key","_e","visitor","creator","directives","rawName","expression","on","change","$event","$$selectedVal","Array","prototype","filter","options","o","selected","map","val","_value","multiple","for","min","placeholder","domProps","input","composing","$set","click","step","max","disabled","staticRenderFns","views_Createvue_type_script_lang_js_","Createvue_type_script_lang_js_","component","componentNormalizer","_node_modules_mini_css_extract_plugin_0_5_0_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_7_0_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_2_0_1_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_7_0_vue_loader_lib_index_js_vue_loader_options_Create_vue_vue_type_style_index_0_id_20902ea8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_0_5_0_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_7_0_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_2_0_1_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_7_0_vue_loader_lib_index_js_vue_loader_options_Create_vue_vue_type_style_index_0_id_20902ea8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/create.d6924be4.js","sourcesContent":["<template>\n    <div class=\"app\">\n      <header class=\"navbar navbar-default\" id=\"header\">\n        <div class=\"container-fluid header\">\n          <div class=\"row\">\n            <div class=\"col-sm-3 col-xs-12 navbar-header header--logo\">\n              <h3><router-link :to=\"{ name: 'home'}\">Lucky Airdrop</router-link></h3>\n            </div>\n\n            <div class=\"col-sm-6 hidden-xs header--thor-info\">\n              <div class=\"header--thor-info--wrap text-center\">\n                <div><strong>Account: </strong> <span><a :href=\"accountLink\" target=\"_blank\">{{ account }}</a></span></div> |\n                <div><strong>Balance: </strong>{{ balance }} {{ tokenName }}</div>\n              </div>\n            </div>\n\n          </div>\n        </div>\n      </header>\n\n      <div class=\"container\">\n        <CertModal v-if=\"!account\" />\n\n        <div v-else>\n          <div id='content-area' class='container-fluid create-form'>\n\n            <div v-if=\"hasErr\" class=\"alert envelope-alert\">\n              <b>Please correct the following error(s):</b>\n              <ul>\n                <li v-for=\"(error, index) in errors\" :key=\"index\">{{ error }}</li>\n              </ul>\n            </div>\n\n            <!-- Create Form -->\n            <div v-if='!created' class='container-fluid envelope-container envelope-container--create'>\n              <div class='envelope--title'>\n                <h4>Create Your Red Envelope</h4>\n              </div>\n              <hr>\n\n              <div class='envelope--content'>\n                <div class='envelope--field'>\n                  <div class='envelope--input'>\n                    <div class='input-group'>\n                      <select v-model='tokenName' @change=\"onTokenChange\">\n                        <option value='VET' selected>VET</option>\n                        <option value='VTHO'>VTHO</option>\n                        <option value='OCE'>OCE</option>\n                        <option value='PLA'>PLA</option>\n                        <option value='TIC'>TIC</option>\n                      </select>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div class='envelope--content'>\n                <div class='envelope--field'>\n                  <div class='envelope--input'>\n                    <div class='input-group'>\n                      <div class='input-addon'>\n                        <label v-if='envelope.envelopeType == 0' for='amount'>Amount Each</label>\n                        <label v-else-if='envelope.envelopeType == 1' for='amount'>Total</label>\n                      </div>\n                      <input\n                        id='amount'\n                        v-model='envelope.amount'\n                        type='number'\n                        min='0.006'\n                        placeholder='1.0'\n                        value='1.0'\n                        class='right-align'\n                      >\n                      <div class='input-addon'>\n                        <label for='amount'>{{ tokenName }}</label>\n                      </div>\n                    </div>\n                  </div>\n\n                  <p v-if='envelope.envelopeType == 0'>Identical Amount.\n                    <a @click='togglePacketType()'>Change to Random Amount</a>\n                  </p>\n                  <p v-else-if='envelope.envelopeType == 1'>Random Amount.\n                    <a @click='togglePacketType()'>Change to Identical Amount</a>\n                  </p>\n\n                  <div class=\"envelope--input--disclaimer\"><p>0.5% of the total is the tip. No tip for X Node holders.</p></div>\n                </div>\n              </div>\n\n              <div class='envelope--content'>\n                <div class='envelope--field'>\n                  <div class='envelope--input'>\n                    <div class='input-group'>\n                      <div class='input-addon'>\n                        <label for='quantity'>Quantity</label>\n                      </div>\n                      <input\n                        id='quantity'\n                        v-model='envelope.claimers'\n                        type='number'\n                        step='1'\n                        min='1'\n                        max='100'\n                        placeholder='Enter number'\n                        value='1'\n                        class='right-align'\n                      >\n                    </div>\n                  </div>\n                  <p>Enter the number of members between 1 and 100</p>\n                </div>\n              </div>\n\n              <div class='envelope--content'>\n                <div class='envelope--field'>\n                  <div class='envelope--input'>\n                    <div class='input-group'>\n                      <textarea placeholder='Best wishes 🐶' v-model='envelope.message'></textarea>\n                    </div>\n                  </div>\n                </div>\n                <div class='envelope--field'>\n                  <div class='envelope--input'>\n                    <div class='input-group'>\n                      <div class='input-addon'>\n                        <label for='sender'>From: </label>\n                      </div>\n                      <input type='text' name='sender' placeholder='Anonymous' v-model='envelope.nickname'>\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"envelope--input--disclaimer\">\n                  <p>+ {{claimVTHO}} VTHO fee</p>\n                  <p>This is used to pay for the transaction fee when your recipient claims the envelope.</p>\n                </div>\n              </div>\n\n              <div class='envelope--buttons'>\n                <button :disabled=\"isCreating\" class='btn btn-create' @click='createEnvelope()'>{{isCreating ? 'Creating...' + counter : 'Create'}}</button>\n              </div>\n\n              <div class=\"envelope--input--disclaimer\"><p><span>You understand that you are using free software, provided under <a href=\"https://mit-license.org/\" target=\"_blank\">MIT License</a>, at your own risk.</span></p></div>\n            </div>\n\n            <div v-else>\n              <ShareCard :shareLink='shareLink' />\n              <RedPacketInfo :visitor='envelope.creator' :tokenName='tokenName' :envelope='envelope' />\n            </div>\n\n          </div>\n        </div>\n      </div>\n    </div>\n    \n</template>\n\n<script>\nimport BN from 'bignumber.js'\nimport Utils from '../utils'\nimport { cry } from 'thor-devkit'\nimport CertModal from '@/components/CertModal.vue'\nimport ShareCard from '@/components/ShareCard.vue'\nimport RedPacketInfo from '@/components/RedPacketInfo.vue'\n\n\nimport IPFS from 'ipfs-mini'\nconst ipfs = new IPFS({ host: 'ipfs.infura.io', port: 5001, protocol: 'https' })\n\n\nconst VTHO_PER_CLAIMER = 200\n\nexport default {\n  name: 'Create',\n  components: {\n    CertModal,\n    ShareCard,\n    RedPacketInfo,\n  },\n  beforeCreate() {\n    if (!window.connex) {\n      location.href = 'https://env.vechain.org/r/#' + encodeURIComponent(location.href)\n    } else {\n      const signingService = connex.vendor.sign('cert')\n\n      // Generate a random string and request the identification\n      let content = 'Confirm that you would like this site to access your account'\n      signingService.request({\n          purpose: 'identification',\n          payload: {\n              type: 'text',\n              content: content\n          }\n      }).then(result => {\n          this.account = result.annex.signer\n          this.accountLink = this.$config.accountBaseUrl + '/accounts' + this.account\n\n          let sig = Buffer.from(result.signature.slice(2), 'hex')\n          let signMsg = `{\"domain\":\"${result.annex.domain}\",\"payload\":{\"content\":\"${content}\",\"type\":\"text\"},\"purpose\":\"identification\",\"signer\":\"${result.annex.signer}\",\"timestamp\":${result.annex.timestamp}}`\n\n          this.accountPubK = cry.secp256k1.recover(cry.blake2b256(signMsg), sig)\n\n          this.onTokenChange()\n      })\n    }\n  },\n\n  mounted() {\n    this.$ticker = connex.thor.ticker()\n  },\n  destroyed() {\n    this.$ticker = null\n    clearInterval(this.cTicker)\n  },\n  \n  data() {\n    return {\n      showMsg: false,\n      hasErr: false,\n      errors: [],\n      isCreating: false,\n      account: '',\n      accountPubK: '',\n      accountLink: '',\n      tokenName: 'VET',\n      balance: '',\n      created: false,\n      secretWallet: {},\n      shareLink: '',\n      counter: 20,\n      cTicker: null,\n      envelope: {\n        id: null,\n        envelopeType: 0,\n        nickname: '',\n        amount: 1,\n        claimers: 10,\n        duration: 86400,\n        initialBalance: '',\n        message: '',\n        messageLink: '',\n        tokenAddress: '0x0000000000000000000000000000000000000000',\n      }\n    }\n  },\n\n  computed: {\n    claimVTHO() {\n      return VTHO_PER_CLAIMER * this.envelope.claimers\n    }\n  },\n\n  methods: {\n    onTokenChange() {\n      this.balance = '0' // clean up the old value first\n\n      if (this.account) {\n        // get account balance\n          let tokenAddr = this.$config.tokens[this.tokenName]\n          this.envelope.tokenAddress = tokenAddr\n          \n          if (tokenAddr) {\n            let balanceOfABI = {\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"name\":\"balance\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}\n\n            connex.thor.account(tokenAddr).method(balanceOfABI).call(this.account).then(balance => {\n              this.balance = (new BN(balance.decoded.balance)).dividedBy(10**18).toFixed(2)\n            })\n            .catch(err => {\n              console.error(err)\n              this.errors = ['fail to connect the blockchain network']\n              this.hasErr = true\n            })\n          } else {\n            // VET\n            this.envelope.tokenAddress = '0x0000000000000000000000000000000000000000'\n\n            const acc = connex.thor.account(this.account)\n            acc.get().then(accInfo => {\n              this.balance = (new BN(accInfo.balance, 16)).dividedBy(10**18).toFixed(2)\n            })\n            .catch(err => {\n              console.error(err)\n              this.errors = ['fail to connect the blockchain network']\n              this.hasErr = true\n            })\n          }\n      }\n    },\n    togglePacketType() {\n      this.envelope.envelopeType = this.envelope.envelopeType == 0 ? 1 : 0\n    },\n    checkForm() {\n      this.hasErr = false\n      this.errors = []\n      let envelope = this.envelope\n\n      if (!envelope.amount) {\n        this.errors.push('Amount: can not be empty')\n      }\n      if (this.calcAmountInEther().gt(1000000)) {\n        this.errors.push('Total: must be less than 100W')\n      }\n      if (envelope.claimers < 0 || envelope.claimers > 100) {\n        this.errors.push('Quantity: must be between 1 and 100')\n      }\n      if (envelope.message.length > 260) {\n        this.errors.push('Message: must be less than 260 characters')\n      }\n      let holdBalance = (new BN(this.balance))\n      if (holdBalance.isLessThanOrEqualTo(this.calcAmountInEther())) {\n        this.errors.push('Balance: insufficient balance')\n      }\n      if (envelope.nickname.length > 64) {\n        this.errors.push('Nickname: must be less than 64 characters')\n      }\n\n      this.hasErr = this.errors.length > 0\n      return !this.hasErr\n    },\n    createEnvelope() {\n      // 1. validate form\n      if (!this.checkForm()) return\n\n      this.created = false\n      this.isCreating = true\n      this.envelope.initialBalance = this.calcAmountInEther().toString(10)\n\n      // 2. generate secret signer key pair\n      this.secretWallet = Utils.createWallet()\n\n      this.cTicker = setInterval(this.refreshCounter, 1000)\n\n      // 3. upload message to the IPFS\n      // 4. sign & send tx\n      if (this.envelope.message) {\n        ipfs.add(this.envelope.message).then(messageLink => {\n          this.envelope.messageLink = messageLink\n        })\n        .catch(err => {\n          console.error(err)\n          this.errors = ['Upload message failed!']\n          this.hasErr = true\n        })\n        .then(() => {\n          return this.sendCreateTx()\n        })\n      } else {\n        this.sendCreateTx()\n      }\n    },\n    calcAmountInEther() {\n      let amount = this.envelope.envelopeType == 0 ? (this.envelope.amount * this.envelope.claimers) : this.envelope.amount\n      return new BN(amount) // in ether\n    },\n    buildCreateClauses() {\n      let envelope = this.envelope\n      let newEnvelopeABI = {\"constant\":false,\"inputs\":[{\"name\":\"_envelopeType\",\"type\":\"uint8\"},{\"name\":\"_nickname\",\"type\":\"string\"},{\"name\":\"_duration\",\"type\":\"uint64\"},{\"name\":\"_messageLink\",\"type\":\"string\"},{\"name\":\"_maxClaims\",\"type\":\"uint64\"},{\"name\":\"_secretSigner\",\"type\":\"address\"}],\"name\":\"newEnvelope\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"}\n      let newTokenEnvelopeABI = {\"constant\":false,\"inputs\":[{\"name\":\"_envelopeType\",\"type\":\"uint8\"},{\"name\":\"_amount\",\"type\":\"uint256\"},{\"name\":\"_nickname\",\"type\":\"string\"},{\"name\":\"_duration\",\"type\":\"uint64\"},{\"name\":\"_messageLink\",\"type\":\"string\"},{\"name\":\"_maxClaims\",\"type\":\"uint64\"},{\"name\":\"_secretSigner\",\"type\":\"address\"},{\"name\":\"_tokenAddr\",\"type\":\"address\"}],\"name\":\"newVIP180Envelope\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}\n\n      let contract = connex.thor.account(this.$config.contract)\n\n      let clauses = []\n      let duration = 86400 // default expires in 1 day\n      let amount = this.calcAmountInEther()\n      let amountInWei = amount.multipliedBy(10**18)\n\n      if (this.tokenName == 'VET') {\n        let clause = contract.method(newEnvelopeABI)\n                          .value(amountInWei.toString(10))\n                          .asClause(\n                            envelope.envelopeType,\n                            envelope.nickname,\n                            duration,\n                            envelope.messageLink,\n                            envelope.claimers,\n                            this.secretWallet.address\n                          )\n        clauses.push({comment: 'Create Your Red Envelope', ...clause})\n      } else {\n        let tokenContract = connex.thor.account(this.$config.tokens[this.tokenName])\n        let approveABI = {\"constant\": false, \"inputs\": [{\"name\": \"_spender\", \"type\": \"address\"}, { \"name\": \"_value\", \"type\": \"uint256\"}],\"name\": \"approve\",\"outputs\": [],\"payable\": false,\"stateMutability\": \"nonpayable\",\"type\": \"function\"}\n\n        let approveClause = tokenContract.method(approveABI).asClause(this.$config.contract, amountInWei.toString(10))\n        clauses.push({comment: `Approve Envelope Contract ${amount.toString(10)} ${this.tokenName}`, ...approveClause})\n\n        let clause = contract.method(newTokenEnvelopeABI)\n                            .asClause(\n                              envelope.envelopeType,\n                              amountInWei.toString(10),\n                              envelope.nickname,\n                              duration,\n                              envelope.messageLink,\n                              envelope.claimers,\n                              this.secretWallet.address,\n                              envelope.tokenAddress\n                            )\n        clauses.push({comment: 'Create Your Red Envelope', ...clause})\n      }\n\n      return clauses\n    },\n    buildEnergyClause() {\n      let transferABI = {\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"transfer\",\"outputs\":[{\"name\":\"success\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}\n      let transferMethod = connex.thor.account(this.$config.tokens['VTHO']).method(transferABI)\n\n      let amount = VTHO_PER_CLAIMER * this.envelope.claimers\n      let amountInWei = (new BN(amount)).multipliedBy(10**18).toString(10)\n      return {comment: `Pay ${amount} VTHO for your claimers`, ...transferMethod.asClause(this.secretWallet.address, amountInWei)}\n    },\n    sendCreateTx() {\n      let signingService = connex.vendor.sign('tx')\n      let createClauses = this.buildCreateClauses()\n      let energyCluase = this.buildEnergyClause()\n\n      return signingService\n        .gas(500000)\n        .signer(this.account)\n        .request(createClauses.concat(energyCluase))\n        .then(result => {\n          return this.getReceipt(result.txid).then(receipt => {\n            this.isCreating = false\n\n            if(receipt.reverted) {\n              this.errors = ['transaction has been reverted']\n              this.hasErr = true\n              return\n            }\n\n            let createEvent = this.findCreateEvent(receipt)\n            let envelopeId = createEvent.topics[1]\n            \n            console.log('Red Envelope Id:', envelopeId)\n            \n            this.envelope.id = parseInt(envelopeId)\n            this.shareLink = window.location.origin + this.$config.pathPrefix + `/#/claim/${this.envelope.id}/${btoa(this.secretWallet.privateKey)}`\n\n            let encrypted = Utils.encrypt(this.accountPubK, this.shareLink)\n            localStorage.setItem(`shareLink#${this.envelope.id}`, encrypted.toString('hex'))\n\n            this.created = true\n          })\n        })\n        .catch(err => {\n          console.error(err)\n          this.isCreating = false\n          this.errors = ['It seems you rejected the transaction. Try again?']\n          this.hasErr = true\n        })\n    },\n    getReceipt(txid) {\n      return this.$ticker.next().then(() => {\n          return connex.thor.transaction(txid).getReceipt().then(receipt => {\n              if (!receipt) {\n                return this.getReceipt(txid)\n              }\n              return receipt\n            })\n        }).catch(err => {\n          console.error(err)\n          this.errors = ['fail to create the envelope']\n          this.hasErr = true\n        })\n    },\n\n    findCreateEvent(receipt) {\n      for (let i = 0; i < receipt.outputs.length; i++) {\n        let output = receipt.outputs[i]\n        for (let j = 0; j < output.events.length; j++) {\n          if (output.events[j].address == this.$config.contract) {\n            return output.events[j]\n          }\n        }\n      }\n    },\n    refreshCounter() {\n      if (this.counter == 0) {\n        this.counter = 20\n      }\n      this.counter--\n    }\n  }\n  \n}\n</script>\n\n<style scoped>\n  .cls-1{fill:#d8d8d8;}.cls-2{fill:#e1e7ec;}.cls-3{fill:#eb423e;}.cls-4{fill:#fbb03b;}.cls-5{fill:#7ac943;}.cls-6{fill:#fff;}.cls-7{fill:none;stroke:#eb423e;stroke-miterlimit:10;stroke-width:5px;}\n  .btn-create {\n    padding: 1rem 10rem;\n  }\n</style>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app\"},[_c('header',{staticClass:\"navbar navbar-default\",attrs:{\"id\":\"header\"}},[_c('div',{staticClass:\"container-fluid header\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-sm-3 col-xs-12 navbar-header header--logo\"},[_c('h3',[_c('router-link',{attrs:{\"to\":{ name: 'home'}}},[_vm._v(\"Lucky Airdrop\")])],1)]),_c('div',{staticClass:\"col-sm-6 hidden-xs header--thor-info\"},[_c('div',{staticClass:\"header--thor-info--wrap text-center\"},[_c('div',[_c('strong',[_vm._v(\"Account: \")]),_c('span',[_c('a',{attrs:{\"href\":_vm.accountLink,\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.account))])])]),_vm._v(\" |\\n            \"),_c('div',[_c('strong',[_vm._v(\"Balance: \")]),_vm._v(_vm._s(_vm.balance)+\" \"+_vm._s(_vm.tokenName))])])])])])]),_c('div',{staticClass:\"container\"},[(!_vm.account)?_c('CertModal'):_c('div',[_c('div',{staticClass:\"container-fluid create-form\",attrs:{\"id\":\"content-area\"}},[(_vm.hasErr)?_c('div',{staticClass:\"alert envelope-alert\"},[_c('b',[_vm._v(\"Please correct the following error(s):\")]),_c('ul',_vm._l((_vm.errors),function(error,index){return _c('li',{key:index},[_vm._v(_vm._s(error))])}),0)]):_vm._e(),(!_vm.created)?_c('div',{staticClass:\"container-fluid envelope-container envelope-container--create\"},[_c('div',{staticClass:\"envelope--title\"},[_c('h4',[_vm._v(\"Create Your Red Envelope\")])]),_c('hr'),_c('div',{staticClass:\"envelope--content\"},[_c('div',{staticClass:\"envelope--field\"},[_c('div',{staticClass:\"envelope--input\"},[_c('div',{staticClass:\"input-group\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tokenName),expression:\"tokenName\"}],on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.tokenName=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.onTokenChange]}},[_c('option',{attrs:{\"value\":\"VET\",\"selected\":\"\"}},[_vm._v(\"VET\")]),_c('option',{attrs:{\"value\":\"VTHO\"}},[_vm._v(\"VTHO\")]),_c('option',{attrs:{\"value\":\"OCE\"}},[_vm._v(\"OCE\")]),_c('option',{attrs:{\"value\":\"PLA\"}},[_vm._v(\"PLA\")]),_c('option',{attrs:{\"value\":\"TIC\"}},[_vm._v(\"TIC\")])])])])])]),_c('div',{staticClass:\"envelope--content\"},[_c('div',{staticClass:\"envelope--field\"},[_c('div',{staticClass:\"envelope--input\"},[_c('div',{staticClass:\"input-group\"},[_c('div',{staticClass:\"input-addon\"},[(_vm.envelope.envelopeType == 0)?_c('label',{attrs:{\"for\":\"amount\"}},[_vm._v(\"Amount Each\")]):(_vm.envelope.envelopeType == 1)?_c('label',{attrs:{\"for\":\"amount\"}},[_vm._v(\"Total\")]):_vm._e()]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.envelope.amount),expression:\"envelope.amount\"}],staticClass:\"right-align\",attrs:{\"id\":\"amount\",\"type\":\"number\",\"min\":\"0.006\",\"placeholder\":\"1.0\",\"value\":\"1.0\"},domProps:{\"value\":(_vm.envelope.amount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.envelope, \"amount\", $event.target.value)}}}),_c('div',{staticClass:\"input-addon\"},[_c('label',{attrs:{\"for\":\"amount\"}},[_vm._v(_vm._s(_vm.tokenName))])])])]),(_vm.envelope.envelopeType == 0)?_c('p',[_vm._v(\"Identical Amount.\\n                \"),_c('a',{on:{\"click\":function($event){return _vm.togglePacketType()}}},[_vm._v(\"Change to Random Amount\")])]):(_vm.envelope.envelopeType == 1)?_c('p',[_vm._v(\"Random Amount.\\n                \"),_c('a',{on:{\"click\":function($event){return _vm.togglePacketType()}}},[_vm._v(\"Change to Identical Amount\")])]):_vm._e(),_c('div',{staticClass:\"envelope--input--disclaimer\"},[_c('p',[_vm._v(\"0.5% of the total is the tip. No tip for X Node holders.\")])])])]),_c('div',{staticClass:\"envelope--content\"},[_c('div',{staticClass:\"envelope--field\"},[_c('div',{staticClass:\"envelope--input\"},[_c('div',{staticClass:\"input-group\"},[_c('div',{staticClass:\"input-addon\"},[_c('label',{attrs:{\"for\":\"quantity\"}},[_vm._v(\"Quantity\")])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.envelope.claimers),expression:\"envelope.claimers\"}],staticClass:\"right-align\",attrs:{\"id\":\"quantity\",\"type\":\"number\",\"step\":\"1\",\"min\":\"1\",\"max\":\"100\",\"placeholder\":\"Enter number\",\"value\":\"1\"},domProps:{\"value\":(_vm.envelope.claimers)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.envelope, \"claimers\", $event.target.value)}}})])]),_c('p',[_vm._v(\"Enter the number of members between 1 and 100\")])])]),_c('div',{staticClass:\"envelope--content\"},[_c('div',{staticClass:\"envelope--field\"},[_c('div',{staticClass:\"envelope--input\"},[_c('div',{staticClass:\"input-group\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.envelope.message),expression:\"envelope.message\"}],attrs:{\"placeholder\":\"Best wishes 🐶\"},domProps:{\"value\":(_vm.envelope.message)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.envelope, \"message\", $event.target.value)}}})])])]),_c('div',{staticClass:\"envelope--field\"},[_c('div',{staticClass:\"envelope--input\"},[_c('div',{staticClass:\"input-group\"},[_c('div',{staticClass:\"input-addon\"},[_c('label',{attrs:{\"for\":\"sender\"}},[_vm._v(\"From: \")])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.envelope.nickname),expression:\"envelope.nickname\"}],attrs:{\"type\":\"text\",\"name\":\"sender\",\"placeholder\":\"Anonymous\"},domProps:{\"value\":(_vm.envelope.nickname)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.envelope, \"nickname\", $event.target.value)}}})])])]),_c('div',{staticClass:\"envelope--input--disclaimer\"},[_c('p',[_vm._v(\"+ \"+_vm._s(_vm.claimVTHO)+\" VTHO fee\")]),_c('p',[_vm._v(\"This is used to pay for the transaction fee when your recipient claims the envelope.\")])])]),_c('div',{staticClass:\"envelope--buttons\"},[_c('button',{staticClass:\"btn btn-create\",attrs:{\"disabled\":_vm.isCreating},on:{\"click\":function($event){return _vm.createEnvelope()}}},[_vm._v(_vm._s(_vm.isCreating ? 'Creating...' + _vm.counter : 'Create'))])]),_c('div',{staticClass:\"envelope--input--disclaimer\"},[_c('p',[_c('span',[_vm._v(\"You understand that you are using free software, provided under \"),_c('a',{attrs:{\"href\":\"https://mit-license.org/\",\"target\":\"_blank\"}},[_vm._v(\"MIT License\")]),_vm._v(\", at your own risk.\")])])])]):_c('div',[_c('ShareCard',{attrs:{\"shareLink\":_vm.shareLink}}),_c('RedPacketInfo',{attrs:{\"visitor\":_vm.envelope.creator,\"tokenName\":_vm.tokenName,\"envelope\":_vm.envelope}})],1)])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Create.vue?vue&type=template&id=20902ea8&scoped=true&\"\nimport script from \"./Create.vue?vue&type=script&lang=js&\"\nexport * from \"./Create.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Create.vue?vue&type=style&index=0&id=20902ea8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"20902ea8\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.5.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=style&index=0&id=20902ea8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.5.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Create.vue?vue&type=style&index=0&id=20902ea8&scoped=true&lang=css&\""],"sourceRoot":""}